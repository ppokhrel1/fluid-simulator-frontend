/* See third-party-licenses.txt for licenses of any bundled software. */
(()=>{"use strict";var e,t,s,a={9208:(e,t,s)=>{var a=s(3696),n=s(7470),r=s(908),o=s(6792),l=s(4426),i=s(5184),c=s(8608),d=s(9024),m=s(6374),u=s(1906),p=s(6062),x=s(2540);const h=({gridVisible:e,autoRotateEnabled:t,currentFile:s,onModelLoaded:n})=>{const r=(0,a.useRef)(null),p=(0,a.useRef)(new i.YJl),{invalidate:h}=(0,u.C)();return a.useEffect(()=>{n(r)},[n]),a.useEffect(()=>{r.current&&(r.current.autoRotate=t,h())},[t,h]),a.useEffect(()=>{if(!s)return;let e=null;(async()=>{try{const t=s.name.toLowerCase().split(".").pop();let a;switch(e=URL.createObjectURL(s),t){case"stl":const s=new c.t,n=await new Promise((t,a)=>{s.load(e,t,void 0,a)});a=new i.eaF(n,new i._4j({color:"#3b82f6",roughness:.3,metalness:.1}));break;case"obj":const r=new d.L;a=await new Promise((t,s)=>{r.load(e,t,void 0,s)}),a.traverse(e=>{e instanceof i.eaF&&(e.material=new i._4j({color:"#3b82f6",roughness:.3,metalness:.1}))});break;case"glb":case"gltf":const o=new m.B;a=(await new Promise((t,s)=>{o.load(e,t,void 0,s)})).scene;break;default:throw new Error(`Unsupported file format: ${t}`)}p.current.clear();const o=(new i.NRn).setFromObject(a),l=o.getCenter(new i.Pq0),u=o.getSize(new i.Pq0);a.position.sub(l);const x=3/(Math.max(u.x,u.y,u.z)||1);a.scale.setScalar(x),p.current.add(a),r.current&&r.current.reset(),n(r)}catch(e){console.error("Error loading model:",e),alert(`Error loading model: ${e}`)}finally{e&&(URL.revokeObjectURL(e),e=null)}})()},[s]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("ambientLight",{intensity:.5}),(0,x.jsx)("directionalLight",{position:[10,10,10],intensity:1,castShadow:!0}),(0,x.jsx)("hemisphereLight",{color:8947967,groundColor:4473924,intensity:.6}),e&&(0,x.jsx)(o.x,{position:[0,-1,0],args:[20,20],cellSize:1,cellColor:4473924,sectionSize:5,sectionColor:2236962,fadeDistance:30}),(0,x.jsx)("group",{ref:p}),(0,x.jsx)(l.N,{ref:r,enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,dampingFactor:.05,minDistance:.5,maxDistance:100,maxPolarAngle:Math.PI,mouseButtons:{LEFT:i.kBv.ROTATE,MIDDLE:i.kBv.DOLLY,RIGHT:i.kBv.PAN}})]})},g=(0,a.forwardRef)(({onStateUpdate:e,appState:t},s)=>{const[n,r]=(0,a.useState)(null),o=(0,a.useRef)(null),l=t=>{[".stl",".obj",".glb",".gltf"].some(e=>t.name.toLowerCase().endsWith(e))?(e({status:`Loading ${t.name}...`}),r(t)):alert("Please upload STL, OBJ, GLB, or GLTF files only.")};return(0,a.useImperativeHandle)(s,()=>({loadFile:l,processMessage:s=>{s.file&&l(s.file),setTimeout(()=>{const a={type:"ai",content:`Processed: "${s.message}"`,time:(new Date).toLocaleTimeString()};e({chatMessages:[...t.chatMessages,a]})},1e3)},resetCamera:()=>{o.current&&(o.current.reset(),e({status:"Camera reset to initial view."}),setTimeout(()=>{e({status:n?`${n.name} loaded - Analysis ready`:"Ready for upload"})},1500))},toggleGrid:()=>{e({gridVisible:!t.gridVisible})},toggleAutoRotate:()=>{e({autoRotateEnabled:!t.autoRotateEnabled})},takeScreenshot:()=>{const e=document.querySelector("canvas");if(e){const t=document.createElement("a");t.download=`curfd_screenshot_${Date.now()}.png`,t.href=e.toDataURL(),t.click()}}})),(0,x.jsx)(p.Hl,{shadows:!0,camera:{position:[5,3,5],fov:50,near:.1,far:1e3},gl:{antialias:!0,alpha:!0},style:{background:"transparent"},onCreated:({gl:e})=>{e.setClearColor(988970)},children:(0,x.jsx)(h,{gridVisible:t.gridVisible,autoRotateEnabled:t.autoRotateEnabled,currentFile:n,onModelLoaded:t=>{o.current=t.current,n&&e({status:`${n.name} loaded - Analysis ready`})}})})});g.displayName="ThreeJSCanvas";const b=g;var f=s(8853),y=s(4264);const j=({status:e})=>(0,x.jsxs)(f.A,{className:"bg-dark bg-opacity-75 border-bottom border-secondary",children:[(0,x.jsxs)(f.A.Brand,{className:"text-white d-flex align-items-center",children:[(0,x.jsx)("i",{className:"fas fa-wind text-primary me-2"}),(0,x.jsx)("span",{className:"fw-bold font-monospace",children:"CURFD"}),(0,x.jsx)("small",{className:"text-muted ms-2",children:"V3 - Advanced AI CFD Engine"})]}),(0,x.jsxs)("div",{className:"ms-auto d-flex align-items-center",children:[(0,x.jsxs)(y.A,{bg:"secondary",className:"d-flex align-items-center me-3",children:[(0,x.jsx)("div",{className:"bg-success rounded-circle me-2",style:{width:"8px",height:"8px"}}),e]}),(0,x.jsx)("div",{className:"bg-dark rounded-circle border border-secondary",style:{width:"36px",height:"36px"},children:(0,x.jsx)("i",{className:"fas fa-user-circle text-muted d-flex align-items-center justify-content-center h-100"})})]})]});var v=s(6132),N=s(650),w=s(7912);const k=({expanded:e,onToggle:t,onFileSelect:s})=>(0,x.jsxs)(v.A,{className:"h-100 bg-dark bg-opacity-75 border-secondary",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:[(0,x.jsx)(v.A.Header,{className:"bg-dark border-secondary d-flex justify-content-center",children:(0,x.jsx)("i",{className:"fas fa-folder text-primary fs-5"})}),(0,x.jsx)(v.A.Body,{className:"d-flex flex-column align-items-center gap-2",children:[{name:"Car Design v2.stl",color:"#7c3aed",icon:"fas fa-car"},{name:"Airplane Wing.stl",color:"#3b82f6",icon:"fas fa-plane"},{name:"Turbine Blade.stl",color:"#10b981",icon:"fas fa-fan"}].map((t,a)=>(0,x.jsx)(N.A,{placement:"right",overlay:(0,x.jsx)(w.A,{children:t.name}),children:(0,x.jsxs)("div",{className:"rounded d-flex align-items-center justify-content-center cursor-pointer",style:{width:e?"100%":"50px",height:"50px",background:`linear-gradient(135deg, ${t.color}, ${t.color}aa)`,transition:"all 0.3s ease"},onClick:()=>s(t),children:[(0,x.jsx)("i",{className:t.icon,style:{color:"white",fontSize:"20px"}}),e&&(0,x.jsx)("small",{className:"text-white ms-2 text-truncate",style:{fontSize:"12px"},children:t.name})]})},a))})]});s(3617),s(3991);const R=({chatMessages:e,selectedAiModel:t,isTyping:s,onSendMessage:n,onModelChange:r,onFileUpload:o})=>{const[l,i]=(0,a.useState)(""),c=(0,a.useRef)(null);(0,a.useEffect)(()=>{c.current?.scrollIntoView({behavior:"smooth"})},[e]);const d=()=>{l.trim()&&!s&&(n(l.trim()),i(""))};return(0,x.jsxs)("div",{className:"h-100 bg-dark border-0 rounded-0 d-flex flex-column",children:[(0,x.jsxs)("div",{className:"bg-dark border-secondary d-flex align-items-center py-3 px-3 border-bottom",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"bg-primary rounded-circle p-2 me-2",children:(0,x.jsx)("i",{className:"fas fa-robot text-white"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h6",{className:"text-white mb-0",children:"CURFD Assistant"}),(0,x.jsx)("small",{className:"text-muted",children:"AI CFD Analysis"})]})]}),(0,x.jsx)("div",{className:"ms-auto",children:(0,x.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"form-select form-select-sm bg-dark text-white border-secondary",children:[(0,x.jsx)("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),(0,x.jsx)("option",{value:"claude-3.5",children:"Claude 3.5"}),(0,x.jsx)("option",{value:"openfoam",children:"OpenFOAM"}),(0,x.jsx)("option",{value:"gemini-pro",children:"Gemini Pro"})]})})]}),(0,x.jsxs)("div",{className:"flex-grow-1 p-3 custom-scrollbar",style:{overflowY:"auto"},children:[e.map((e,t)=>(0,x.jsxs)("div",{className:"mb-3 "+("user"===e.type?"text-end":"text-start"),children:["ai"===e.type&&(0,x.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,x.jsx)("div",{className:"bg-primary rounded-circle p-1 me-2",children:(0,x.jsx)("i",{className:"fas fa-robot text-white",style:{fontSize:"12px"}})}),(0,x.jsx)("small",{className:"text-primary",children:"CURFD AI"})]}),(0,x.jsx)("div",{className:"d-inline-block p-3 rounded "+("user"===e.type?"bg-primary text-white":"bg-secondary bg-opacity-25 text-white border border-secondary"),style:{maxWidth:"90%"},children:e.content}),(0,x.jsx)("small",{className:"text-muted d-block mt-1",children:e.time})]},t)),s&&(0,x.jsxs)("div",{className:"text-start mb-3",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,x.jsx)("div",{className:"bg-primary rounded-circle p-1 me-2",children:(0,x.jsx)("i",{className:"fas fa-robot text-white",style:{fontSize:"12px"}})}),(0,x.jsx)("small",{className:"text-primary",children:"CURFD AI"})]}),(0,x.jsx)("div",{className:"bg-secondary bg-opacity-25 text-white p-3 rounded d-inline-block border border-secondary",children:(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2 text-muted",children:[(0,x.jsx)("span",{children:"Typing"}),(0,x.jsxs)("div",{className:"d-flex gap-1",children:[(0,x.jsx)("div",{className:"typing-dot bg-primary rounded-circle",style:{width:"6px",height:"6px"}}),(0,x.jsx)("div",{className:"typing-dot bg-primary rounded-circle",style:{width:"6px",height:"6px"}}),(0,x.jsx)("div",{className:"typing-dot bg-primary rounded-circle",style:{width:"6px",height:"6px"}})]})]})})]}),(0,x.jsx)("div",{ref:c})]}),(0,x.jsx)("div",{className:"bg-dark border-secondary p-3 border-top",children:(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("input",{type:"file",className:"d-none",id:"chatFileInput",accept:".stl,.obj,.step,.stp,.iges,.glb",onChange:e=>{const t=e.target.files?.[0];t&&(o(t),n(`Analyze ${t.name}`,t))}}),(0,x.jsx)("button",{type:"button",className:"btn btn-outline-secondary border-secondary",onClick:()=>document.getElementById("chatFileInput")?.click(),title:"Upload file",children:(0,x.jsx)("i",{className:"fas fa-paperclip"})}),(0,x.jsx)("input",{type:"text",className:"form-control bg-dark text-white border-secondary",placeholder:"Type your message...",value:l,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())}}),(0,x.jsx)("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:!l.trim()||s,children:(0,x.jsx)("i",{className:"fas fa-paper-plane"})})]})})]})},C=({onUploadModel:e,onResetView:t,onToggleGrid:s,onAutoRotate:a,onScreenshot:n,gridVisible:r,autoRotateEnabled:o})=>{const l=e=>{const t="btn rounded-pill mx-1 border-0";return e?`${t} btn-primary text-white`:`${t} btn-outline-secondary text-white`};return(0,x.jsxs)("div",{className:"bg-dark bg-opacity-75 rounded-pill p-2 border border-secondary d-flex",children:[(0,x.jsxs)("button",{className:l(r),onClick:s,children:[(0,x.jsx)("i",{className:"fas fa-th me-2"}),"Grid"]}),(0,x.jsxs)("button",{className:l(o),onClick:a,children:[(0,x.jsx)("i",{className:"fas fa-sync-alt me-2"}),"Auto Rotate"]}),(0,x.jsxs)("button",{className:l(!1),onClick:t,children:[(0,x.jsx)("i",{className:"fas fa-refresh me-2"}),"Reset View"]}),(0,x.jsxs)("button",{className:l(!1),onClick:e,children:[(0,x.jsx)("i",{className:"fas fa-upload me-2"}),"Upload"]}),(0,x.jsxs)("button",{className:l(!1),onClick:n,children:[(0,x.jsx)("i",{className:"fas fa-camera me-2"}),"Screenshot"]})]})};s(3110);const S=()=>{const[e,t]=(0,a.useState)({leftDockExpanded:!1,isTyping:!1,chatMessages:[{type:"ai",content:"Hello! I'm CURFD AI. Upload a 3D model to begin CFD analysis.",time:(new Date).toLocaleTimeString()}],selectedAiModel:"gpt-4-turbo",uploadedFiles:[],status:"Ready for analysis",gridVisible:!0,autoRotateEnabled:!1}),s=(0,a.useRef)(null),n=(0,a.useRef)(null),r=e=>{t(t=>({...t,...e}))},o=(e,t)=>{console.log(`Three action: ${e}`,t),s.current&&s.current[e]?s.current[e](t):console.warn(`Three action ${e} not available`)};return(0,x.jsxs)("div",{className:"app container-fluid vh-100 vw-100 p-0 m-0 bg-dark",children:[(0,x.jsx)("div",{className:"fixed-top bg-dark border-bottom border-secondary",style:{zIndex:1050,height:"60px"},children:(0,x.jsx)(j,{status:e.status})}),(0,x.jsxs)("div",{className:"d-flex h-100 w-100",style:{paddingTop:"60px"},children:[(0,x.jsx)("div",{className:"h-100",style:{width:"16.666%"},children:(0,x.jsx)(k,{expanded:e.leftDockExpanded,onToggle:e=>r({leftDockExpanded:e}),onFileSelect:e=>{r({status:`Loading ${e.name}...`}),setTimeout(()=>{r({status:`${e.name} loaded - Analysis ready`})},1e3)}})}),(0,x.jsx)("div",{className:"h-100",style:{width:"66.666%"},children:(0,x.jsx)("div",{className:"threejs-container h-100 w-100 bg-secondary bg-opacity-10",children:(0,x.jsx)(b,{ref:s,onStateUpdate:r,appState:e})})}),(0,x.jsx)("div",{className:"h-100 border-start border-secondary",style:{width:"16.666%"},children:(0,x.jsx)(R,{chatMessages:e.chatMessages,selectedAiModel:e.selectedAiModel,isTyping:e.isTyping,onSendMessage:(t,s)=>{const a={type:"user",content:t,time:(new Date).toLocaleTimeString()};r({chatMessages:[...e.chatMessages,a],isTyping:!0}),o("processMessage",{message:t,file:s}),setTimeout(()=>{const s={type:"ai",content:`I've processed your request: "${t}". The 3D model shows optimal pressure distribution with peak values at the frontal surfaces.`,time:(new Date).toLocaleTimeString()};r({chatMessages:[...e.chatMessages,a,s],isTyping:!1})},2e3)},onModelChange:e=>r({selectedAiModel:e}),onFileUpload:e=>o("loadFile",e)})})]}),(0,x.jsx)("div",{className:"fixed-bottom bg-dark",style:{zIndex:1040},children:(0,x.jsx)("div",{className:"d-flex justify-content-center py-2",children:(0,x.jsx)(C,{onUploadModel:()=>{console.log("Upload button clicked"),n.current&&n.current.click()},onResetView:()=>{console.log("Reset view called"),o("resetCamera")},onToggleGrid:()=>{const t=!e.gridVisible;r({gridVisible:t}),o("toggleGrid")},onAutoRotate:()=>{const t=!e.autoRotateEnabled;r({autoRotateEnabled:t}),o("toggleAutoRotate")},onScreenshot:()=>o("takeScreenshot"),gridVisible:e.gridVisible,autoRotateEnabled:e.autoRotateEnabled})})}),(0,x.jsx)("input",{ref:n,type:"file",id:"fileInput",accept:".stl,.obj,.step,.stp,.iges,.glb",className:"d-none",onChange:e=>{console.log("File input changed",e.target.files),e.target.files?.[0]&&(o("loadFile",e.target.files[0]),e.target.value="")}})]})};function T(){return(0,x.jsxs)("div",{children:[(0,x.jsxs)("nav",{children:[(0,x.jsx)(r.N_,{to:"/",children:"Home"})," | ",(0,x.jsx)(r.N_,{to:"/about",children:"About"})," | ",(0,x.jsx)(r.N_,{to:"/contact",children:"Contact"})]}),(0,x.jsx)(r.BV,{children:(0,x.jsx)(r.qh,{path:"/",element:(0,x.jsx)(S,{})})})]})}const A=document.createElement("div");document.body.appendChild(A);n.createRoot(A).render((0,x.jsx)(a.StrictMode,{children:(0,x.jsx)(r.Kd,{children:(0,x.jsx)(T,{})})}))}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return a[e].call(s.exports,s,s.exports,r),s.exports}r.m=a,e=[],r.O=(t,s,a,n)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,a,n]=e[d],l=!0,i=0;i<s.length;i++)(!1&n||o>=n)&&Object.keys(r.O).every(e=>r.O[e](s[i]))?s.splice(i--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);r.r(n);var o={};t=t||[null,s({}),s([]),s(s)];for(var l=2&a&&e;("object"==typeof l||"function"==typeof l)&&!~t.indexOf(l);l=s(l))Object.getOwnPropertyNames(l).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,r.d(n,o),n},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[o,l,i]=s,c=0;if(o.some(t=>0!==e[t])){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(i)var d=i(r)}for(t&&t(s);c<o.length;c++)n=o[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=globalThis.webpackChunk=globalThis.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var o=r.O(void 0,[399],()=>r(9208));o=r.O(o)})();