/* See third-party-licenses.txt for licenses of any bundled software. */
(()=>{"use strict";var e,t,s,a={4644:(e,t,s)=>{var a=s(3696),n=s(7470),r=s(908),i=(s(3617),s(1975),s(3242),s(3991),s(7227),s(769),s(9930),s(9659),s(4832),s(5963),s(3044),s(837),s(2680)),l=s(6792),o=s(4426),c=s(5184),d=s(8608),m=s(9024),u=s(6374),h=s(1906),g=s(6062),x=s(2540);const p=({position:e,pressure:t,onRemove:s})=>(0,x.jsxs)("group",{position:e,children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("sphereGeometry",{args:[.05,16,16]}),(0,x.jsx)("meshStandardMaterial",{color:"#9F7AEA",emissive:"#6366F1",emissiveIntensity:.5})]}),(0,x.jsx)(i.E,{position:[0,.15,0],center:!0,distanceFactor:2,style:{pointerEvents:"auto"},children:(0,x.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(159, 122, 234, 0.95), rgba(99, 102, 241, 0.95))",color:"white",padding:"8px 12px",borderRadius:8,fontSize:13,fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.2)",minWidth:80,textAlign:"center",position:"relative",userSelect:"none"},children:[(0,x.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:[t.toFixed(1)," kPa"]}),(0,x.jsx)("div",{style:{fontSize:10,opacity:.9,marginTop:2},children:"Pressure"}),(0,x.jsx)("button",{onClick:s,style:{position:"absolute",top:-6,right:-6,width:18,height:18,borderRadius:"50%",background:"rgba(239, 68, 68, 0.9)",border:"1px solid white",color:"white",fontSize:10,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"âœ•"})]})})]}),b=({gridVisible:e,autoRotateEnabled:t,currentFile:s,onModelLoaded:n,onPartHover:r,onPartSelect:i,onPressureClick:g,pressureMarkers:b,onRemoveMarker:f})=>{const j=(0,a.useRef)(null),y=(0,a.useRef)(new c.YJl),{invalidate:v,camera:N,gl:w,size:S}=(0,h.C)(),A=((0,a.useRef)(null),(0,a.useRef)(null)),k=(0,a.useRef)(null);return a.useEffect(()=>{n({controlsRef:j,isolatePart:e=>{if(!y.current)return;let t;if(y.current.traverse(s=>{(s.name&&s.name===e||s.uuid===e)&&(t=s)}),t){let e=t;for(;e&&e.parent!==y.current;)e=e.parent;y.current.children.forEach(t=>{t.visible=t===e})}},clearIsolation:()=>{y.current&&y.current.traverse(e=>e.visible=!0)}})},[n]),a.useEffect(()=>{j.current&&(j.current.autoRotate=t,v())},[t,v]),a.useEffect(()=>{if(!s)return;let e=null;(async()=>{try{const t=s.name.toLowerCase().split(".").pop();let a;switch(e=URL.createObjectURL(s),t){case"stl":const s=new d.t,n=await new Promise((t,a)=>{s.load(e,t,void 0,a)});n.computeBoundingBox(),n.boundingBox&&(k.current={minY:n.boundingBox.min.y,maxY:n.boundingBox.max.y});const r=n.attributes.position,i=new Float32Array(3*r.count);for(let e=0;e<r.count;e++){const t=r.getY(e),s=n.boundingBox?.min.y??-1,a=(t-s)/((n.boundingBox?.max.y??1)-s),l=new c.Q1f;a<.5?l.setRGB(2*a,1,0):l.setRGB(1,1-2*(a-.5),0),i[3*e]=l.r,i[3*e+1]=l.g,i[3*e+2]=l.b}n.setAttribute("color",new c.THS(i,3)),a=new c.eaF(n,new c._4j({vertexColors:!0,roughness:.3,metalness:.1}));break;case"obj":const l=new m.L;a=await new Promise((t,s)=>{l.load(e,t,void 0,s)}),a.traverse(e=>{if(e instanceof c.eaF&&e.geometry){const t=e.geometry;t.boundingBox||t.computeBoundingBox(),!k.current&&t.boundingBox&&(k.current={minY:t.boundingBox.min.y,maxY:t.boundingBox.max.y});const s=t.attributes.position,a=new Float32Array(3*s.count);for(let e=0;e<s.count;e++){const n=s.getY(e),r=t.boundingBox?.min.y??-1,i=(n-r)/((t.boundingBox?.max.y??1)-r),l=new c.Q1f;i<.5?l.setRGB(2*i,1,0):l.setRGB(1,1-2*(i-.5),0),a[3*e]=l.r,a[3*e+1]=l.g,a[3*e+2]=l.b}t.setAttribute("color",new c.THS(a,3)),e.material=new c._4j({vertexColors:!0,roughness:.3,metalness:.1})}});break;case"glb":case"gltf":const o=new u.B;a=(await new Promise((t,s)=>{o.load(e,t,void 0,s)})).scene;break;default:throw new Error(`Unsupported file format: ${t}`)}y.current.clear(),y.current.add(a);const r=(new c.NRn).setFromObject(y.current),i=r.getCenter(new c.Pq0),l=r.getSize(new c.Pq0),o=Math.max(l.x,l.y,l.z);y.current.position.set(-i.x,-i.y,-i.z);const h=3,g=h/(o||1);if(y.current.scale.setScalar(g),j.current&&j.current.object){const e=j.current.object,t=2.5*h;e.position.set(t,.6*t,t),e.lookAt(0,0,0),j.current.target.set(0,0,0),j.current.update()}else j.current&&j.current.reset();n({controlsRef:j,isolatePart:e=>{},clearIsolation:()=>{}})}catch(e){console.error("Error loading model:",e),alert(`Error loading model: ${e}`)}finally{e&&(URL.revokeObjectURL(e),e=null)}})()},[s]),a.useEffect(()=>{const e=w.domElement,t=new c.tBo,s=new c.I9Y,a=a=>{if(!y.current)return;const n=e.getBoundingClientRect();s.x=(a.clientX-n.left)/n.width*2-1,s.y=-(a.clientY-n.top)/n.height*2+1,t.setFromCamera(s,N);const r=t.intersectObjects(y.current.children,!0);if(r.length){const e=r[0],t=e.object;if(k.current&&e.point){const t=e.point.y,{minY:s,maxY:a}=k.current,n=100*((t-s)/(a-s)),r=[e.point.x,e.point.y,e.point.z];g&&g({pressure:n,worldPosition:r})}const s=(e=>{let t=e;for(;t&&"Mesh"!==t.type;)t=t.parent;return t})(t);if(s){let e=s;for(;e&&e.parent!==y.current;)e=e.parent;if(e)return y.current.children.forEach(t=>t.visible=t===e),A.current=e,void(i&&i({name:s.name||s.uuid,metadata:s.userData||{}}))}}y.current.children.forEach(e=>e.visible=!0),A.current=null,i&&i(null)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a)}},[w,N,i,g]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("ambientLight",{intensity:.5}),(0,x.jsx)("directionalLight",{position:[10,10,10],intensity:1,castShadow:!0}),(0,x.jsx)("hemisphereLight",{color:8947967,groundColor:4473924,intensity:.6}),e&&(0,x.jsx)(l.x,{position:[0,-1,0],args:[20,20],cellSize:1,cellColor:4473924,sectionSize:5,sectionColor:2236962,fadeDistance:30}),(0,x.jsx)("group",{ref:y}),b.map(e=>(0,x.jsx)(p,{position:e.worldPosition,pressure:e.pressure,onRemove:()=>f(e.id)},e.id)),(0,x.jsx)(o.N,{ref:j,enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,dampingFactor:.08,minDistance:1,maxDistance:50,maxPolarAngle:Math.PI,zoomSpeed:1.2,rotateSpeed:.8,panSpeed:.8,screenSpacePanning:!1,mouseButtons:{LEFT:c.kBv.ROTATE,MIDDLE:c.kBv.DOLLY,RIGHT:c.kBv.PAN}})]})},f=(0,a.forwardRef)(({onStateUpdate:e,appState:t},s)=>{const[n,r]=(0,a.useState)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(null),o=(0,a.useRef)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[h,p]=(0,a.useState)([]),f=t=>{[".stl",".obj",".glb",".gltf"].some(e=>t.name.toLowerCase().endsWith(e))?(e({status:`Loading ${t.name}...`}),r(t)):alert("Please upload STL, OBJ, GLB, or GLTF files only.")};return(0,a.useImperativeHandle)(s,()=>({loadFile:f,processMessage:s=>{s.file&&f(s.file),setTimeout(()=>{const a={type:"ai",content:`Processed: "${s.message}"`,time:(new Date).toLocaleTimeString()};e({chatMessages:[...t.chatMessages,a]})},1e3)},resetCamera:()=>{i.current&&(i.current.reset(),e({status:"Camera reset to initial view."}),setTimeout(()=>{e({status:n?`${n.name} loaded - Analysis ready`:"Ready for upload"})},1500))},toggleGrid:()=>{e({gridVisible:!t.gridVisible})},toggleAutoRotate:()=>{e({autoRotateEnabled:!t.autoRotateEnabled})},takeScreenshot:()=>{const e=document.querySelector("canvas");if(e){const t=document.createElement("a");t.download=`curfd_screenshot_${Date.now()}.png`,t.href=e.toDataURL(),t.click()}},isolatePart:e=>{l.current&&l.current(e)},clearIsolation:()=>{o.current&&o.current()}})),(0,x.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,x.jsx)(g.Hl,{shadows:!0,camera:{position:[5,3,5],fov:50,near:.1,far:1e3},gl:{antialias:!0,alpha:!0},style:{background:"transparent",width:"100%",height:"100%"},onCreated:({gl:e})=>{e.setClearColor(988970)},children:(0,x.jsx)(b,{gridVisible:t.gridVisible,autoRotateEnabled:t.autoRotateEnabled,currentFile:n,onModelLoaded:t=>{t?.controlsRef&&(i.current=t.controlsRef.current),t?.isolatePart&&(l.current=t.isolatePart),t?.clearIsolation&&(o.current=t.clearIsolation),n&&e({status:`${n.name} loaded - Analysis ready`})},onPartHover:e=>d(e),onPartSelect:e=>u(e),onPressureClick:e=>{const t={id:`marker-${Date.now()}`,pressure:e.pressure,worldPosition:e.worldPosition};p(e=>[...e,t])},pressureMarkers:h,onRemoveMarker:e=>{p(t=>t.filter(t=>t.id!==e))}})}),m&&(0,x.jsx)("div",{style:{position:"absolute",right:12,bottom:12,zIndex:2e3},children:(0,x.jsxs)("div",{style:{background:"rgba(0,0,0,0.7)",color:"white",padding:"10px 12px",borderRadius:8,minWidth:200},children:[(0,x.jsx)("div",{style:{fontWeight:700},children:m.name}),(0,x.jsx)("div",{style:{fontSize:12,marginTop:6},children:Object.keys(m.metadata||{}).length?JSON.stringify(m.metadata):"No metadata"}),(0,x.jsx)("div",{style:{marginTop:8},children:(0,x.jsx)("button",{className:"btn btn-sm btn-light",onClick:()=>{o.current&&(o.current(),u(null))},children:"Clear Isolation"})})]})}),h.length>0&&(0,x.jsx)("div",{style:{position:"absolute",top:12,right:12,zIndex:2e3},children:(0,x.jsxs)("button",{className:"btn btn-sm",onClick:()=>{p([])},style:{background:"rgba(239, 68, 68, 0.9)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",fontWeight:600,fontSize:12,padding:"6px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:["Clear All Markers (",h.length,")"]})})]})});f.displayName="ThreeJSCanvas";const j=f,y=({visible:e,onClose:t,placement:s})=>{if(!e)return null;const a={};return s?(void 0!==s.top&&(a.top=s.top),void 0!==s.right&&(a.right=s.right),void 0!==s.bottom&&(a.bottom=s.bottom),void 0!==s.left&&(a.left=s.left)):(a.left=16,a.bottom=96),(0,x.jsx)("div",{className:"position-fixed",style:{...a,zIndex:2e3},children:(0,x.jsxs)("div",{className:"chat-container shadow",style:{width:280,background:"rgba(0,0,0,0.75)",border:"1px solid rgba(255,255,255,0.12)",backdropFilter:"blur(10px)",borderRadius:14,color:"white",padding:"14px 14px 10px 14px"},children:[(0,x.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,x.jsx)("div",{className:"me-2",style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #9F7AEA, #6366F1)",display:"grid",placeItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)"},children:(0,x.jsx)("span",{style:{fontWeight:800},children:"i"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{style:{fontWeight:700},children:"Navigation"}),(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:12},children:"Use your mouse to move around the model"})]})]}),(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsxs)("div",{style:{position:"relative",width:72,height:104},children:[(0,x.jsx)("div",{style:{width:72,height:104,borderRadius:36,background:"linear-gradient(180deg, rgba(30,41,59,0.9), rgba(15,23,42,0.9))",border:"1px solid rgba(255,255,255,0.08)"}}),(0,x.jsx)("div",{style:{position:"absolute",top:8,left:8,right:36,height:36,borderRadius:10,background:"rgba(255,255,255,0.08)"}}),(0,x.jsx)("div",{style:{position:"absolute",top:8,left:36,right:8,height:36,borderRadius:10,background:"rgba(255,255,255,0.06)"}}),(0,x.jsx)("div",{style:{position:"absolute",top:16,left:"50%",transform:"translateX(-50%)",width:10,height:24,borderRadius:6,background:"rgba(99,102,241,0.9)"}})]}),(0,x.jsxs)("div",{className:"flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,x.jsx)("div",{style:{width:8,height:8,borderRadius:4,background:"#ffffff"}}),(0,x.jsxs)("div",{className:"small",children:[(0,x.jsx)("strong",{children:"Left Click + Drag"})," â€” Rotate"]})]}),(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,x.jsx)("div",{style:{width:8,height:8,borderRadius:4,background:"#A5B4FC"}}),(0,x.jsxs)("div",{className:"small",children:[(0,x.jsx)("strong",{children:"Right Click + Drag"})," â€” Pan"]})]}),(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,x.jsx)("div",{style:{width:8,height:8,borderRadius:4,background:"#22D3EE"}}),(0,x.jsxs)("div",{className:"small",children:[(0,x.jsx)("strong",{children:"Mouse Wheel"})," â€” Zoom"]})]})]})]}),(0,x.jsx)("div",{className:"text-white-50 mt-2",style:{fontSize:11},children:"Tip: Use Reset View at the bottom if you get lost."})]})})},v=(e=new Date)=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=[{id:"gpt-4-turbo",name:"GPT-4 Turbo"},{id:"claude-3.5",name:"Claude 3.5"},{id:"openfoam",name:"OpenFOAM"},{id:"gemini-pro",name:"Gemini Pro"}],w=({onSendMessage:e,selectedModel:t=N[0].id,onModelChange:s})=>{const[n,r]=(0,a.useState)([]),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{r([{type:"ai",content:"Hello â€” I can help with your simulation. Ask me anything!",time:v()}])},[]),(0,a.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[n,o]);const m=t=>{const s=i.trim();if(!s&&!t)return;const a={type:"user",content:s||(t?`Uploaded ${t.name}`:""),time:v(),file:void 0};r(e=>[...e,a]),e&&e(s,t),l(""),c(!0),setTimeout(()=>{const e={type:"ai",content:t?`I've received ${t.name}. What would you like me to analyze?`:`Echo: ${s}`,time:v()};r(t=>[...t,e]),c(!1)},700+800*Math.random())};return(0,x.jsxs)("div",{className:"chat-container d-flex flex-column rounded-3 shadow-lg",style:{maxHeight:"calc(100vh - 92px)"},children:[(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-3 border-bottom border-secondary",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:"/curfdlogo.png",alt:"CURFD",style:{height:"24px"}}),(0,x.jsx)("div",{children:(0,x.jsx)("strong",{className:"text-white",children:"CURFD AI"})})]}),(0,x.jsx)("select",{value:t,onChange:e=>s?.(e.target.value),className:"form-select form-select-sm chat-input rounded-pill px-3",style:{width:"auto",backgroundColor:"rgba(255,255,255,0.1)"},children:N.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,x.jsxs)("div",{className:"flex-grow-1 p-3",style:{overflowY:"auto",maxHeight:"60vh"},children:[n.map((e,t)=>(0,x.jsxs)("div",{className:"mb-4 "+("user"===e.type?"text-end":"text-start"),children:["ai"===e.type&&(0,x.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,x.jsx)("div",{className:"p-1 me-2",style:{background:"var(--brand-gradient)",borderRadius:"50%"},children:(0,x.jsx)("i",{className:"fas fa-robot text-white",style:{fontSize:12}})}),(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,x.jsx)("span",{className:"text-white fw-medium",children:"CURFD AI"}),(0,x.jsx)("span",{className:"text-white-50 small",children:e.time})]})]}),(0,x.jsx)("div",{className:"message-bubble "+("user"===e.type?"user":"ai"),children:e.content}),"user"===e.type&&(0,x.jsx)("div",{className:"text-white-50 small mt-1",children:e.time})]},t)),o&&(0,x.jsxs)("div",{className:"text-start mb-3",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,x.jsx)("div",{className:"bg-primary rounded-circle p-1 me-2",children:(0,x.jsx)("i",{className:"fas fa-robot text-white",style:{fontSize:12}})}),(0,x.jsx)("small",{className:"text-primary",children:"AI"})]}),(0,x.jsx)("div",{className:"bg-secondary bg-opacity-25 text-white p-3 rounded d-inline-block border border-secondary",children:(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2 text-muted",children:[(0,x.jsx)("span",{children:"Typing"}),(0,x.jsxs)("div",{className:"d-flex gap-1",children:[(0,x.jsx)("div",{className:"bg-primary rounded-circle",style:{width:6,height:6}}),(0,x.jsx)("div",{className:"bg-primary rounded-circle",style:{width:6,height:6}}),(0,x.jsx)("div",{className:"bg-primary rounded-circle",style:{width:6,height:6}})]})]})})]}),(0,x.jsx)("div",{ref:d})]}),(0,x.jsxs)("div",{className:"p-3 mt-auto",children:[(0,x.jsx)("div",{className:"d-flex gap-2",children:(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("input",{type:"text",className:"chat-input form-control rounded-start-pill px-3 py-2",placeholder:"Type your message...",value:i,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())}}),(0,x.jsx)("button",{type:"button",className:"btn chat-input rounded-0 px-3",onClick:()=>document.getElementById("chat-file-input")?.click(),title:"Upload file",style:{borderLeft:"1px solid var(--chat-border)",borderRight:"1px solid var(--chat-border)"},children:(0,x.jsx)("i",{className:"fas fa-paperclip text-white-50"})}),(0,x.jsx)("button",{type:"button",className:"btn rounded-end-pill px-4 "+(i.trim()?"btn-brand":"chat-input"),onClick:()=>m(),disabled:o||!i.trim(),children:(0,x.jsx)("i",{className:"fas fa-paper-plane"})})]})}),(0,x.jsx)("input",{id:"chat-file-input",type:"file",className:"d-none",onChange:e=>{const t=e.target.files?.[0];t&&m(t),e.target&&(e.target.value="")},accept:".stl,.obj,.step,.stp,.iges,.glb"})]})]})};var S=s(563);const A=({show:e,onClose:t,cartItems:s,onUpdateQuantity:a,onRemoveItem:n,onCheckout:r})=>{const i=s.reduce((e,t)=>e+t.price*t.quantity,0),l=.08*i,o=i+l;return(0,x.jsxs)(S.A,{show:e,onHide:t,size:"lg",centered:!0,className:"cart-modal",children:[(0,x.jsx)(S.A.Header,{closeButton:!0,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",color:"white"},children:(0,x.jsxs)(S.A.Title,{className:"d-flex align-items-center",children:[(0,x.jsx)("i",{className:"fas fa-shopping-cart me-3",style:{color:"#FFD700",fontSize:"1.5rem"}}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:"Shopping Cart"}),(0,x.jsxs)("small",{style:{opacity:.9,fontSize:"0.85rem"},children:[s.length," ",1===s.length?"item":"items"," in your cart"]})]})]})}),(0,x.jsx)(S.A.Body,{style:{background:"linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%)",padding:"2rem",maxHeight:"60vh",overflowY:"auto"},children:0===s.length?(0,x.jsxs)("div",{className:"text-center py-5",children:[(0,x.jsx)("i",{className:"fas fa-shopping-cart text-white-50",style:{fontSize:"4rem",marginBottom:"1rem"}}),(0,x.jsx)("h4",{className:"text-white-50 mb-3",children:"Your cart is empty"}),(0,x.jsx)("p",{className:"text-white-50",children:"Browse our store to add items to your cart"}),(0,x.jsx)("button",{className:"btn btn-outline-light mt-3",onClick:t,style:{borderRadius:"50px",padding:"0.75rem 2rem"},children:"Continue Shopping"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"cart-items mb-4",children:s.map(e=>(0,x.jsx)("div",{className:"cart-item mb-3 p-3",style:{background:"rgba(255, 255, 255, 0.08)",borderRadius:"15px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,x.jsxs)("div",{className:"row align-items-center",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"rounded-circle p-2 me-3",style:{background:`linear-gradient(135deg, ${e.color}20, ${e.color}40)`,border:`2px solid ${e.color}30`,minWidth:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)("i",{className:e.icon,style:{color:e.color,fontSize:"20px"}})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h6",{className:"text-white mb-1",style:{fontSize:"0.9rem",fontWeight:"600"},children:e.name}),(0,x.jsx)("small",{className:"text-white-50",children:e.size})]})]})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("button",{className:"btn btn-sm",onClick:()=>a(e.id,Math.max(1,e.quantity-1)),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",width:"30px",height:"30px",padding:0,borderRadius:"50%"},children:(0,x.jsx)("i",{className:"fas fa-minus",style:{fontSize:"0.7rem"}})}),(0,x.jsx)("span",{className:"text-white mx-3",style:{minWidth:"20px",textAlign:"center"},children:e.quantity}),(0,x.jsx)("button",{className:"btn btn-sm",onClick:()=>a(e.id,e.quantity+1),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",width:"30px",height:"30px",padding:0,borderRadius:"50%"},children:(0,x.jsx)("i",{className:"fas fa-plus",style:{fontSize:"0.7rem"}})})]})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-success fw-bold",style:{fontSize:"1.1rem"},children:["$",(e.price*e.quantity).toFixed(2)]}),e.originalPrice&&(0,x.jsxs)("small",{className:"text-white-50 text-decoration-line-through",children:["$",(e.originalPrice*e.quantity).toFixed(2)]})]})}),(0,x.jsx)("div",{className:"col-md-2",children:(0,x.jsx)("button",{className:"btn btn-sm",onClick:()=>n(e.id),style:{background:"rgba(220, 53, 69, 0.1)",border:"1px solid rgba(220, 53, 69, 0.3)",color:"#dc3545",borderRadius:"50%",width:"35px",height:"35px",padding:0},children:(0,x.jsx)("i",{className:"fas fa-trash",style:{fontSize:"0.8rem"}})})})]})},e.id))}),(0,x.jsxs)("div",{className:"order-summary p-4",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,x.jsx)("h5",{className:"text-white mb-3",children:"Order Summary"}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,x.jsxs)("span",{className:"text-white-50",children:["Subtotal (",s.length," items)"]}),(0,x.jsxs)("span",{className:"text-white",children:["$",i.toFixed(2)]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,x.jsx)("span",{className:"text-white-50",children:"Tax (8%)"}),(0,x.jsxs)("span",{className:"text-white",children:["$",l.toFixed(2)]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,x.jsx)("span",{className:"text-white-50",children:"Shipping"}),(0,x.jsx)("span",{className:"text-success",children:"FREE"})]}),(0,x.jsx)("hr",{style:{borderColor:"rgba(255, 255, 255, 0.2)"}}),(0,x.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,x.jsx)("span",{className:"text-white fw-bold",style:{fontSize:"1.2rem"},children:"Total"}),(0,x.jsxs)("span",{className:"text-success fw-bold",style:{fontSize:"1.3rem"},children:["$",o.toFixed(2)]})]}),(0,x.jsxs)("div",{className:"d-flex gap-3",children:[(0,x.jsx)("button",{className:"btn btn-outline-light flex-fill",onClick:t,style:{borderRadius:"50px",padding:"0.75rem",fontWeight:"500"},children:"Continue Shopping"}),(0,x.jsxs)("button",{className:"btn flex-fill",onClick:r,style:{background:"linear-gradient(135deg, #28a745, #20c997)",border:"none",color:"white",borderRadius:"50px",padding:"0.75rem",fontWeight:"bold",boxShadow:"0 4px 15px rgba(40, 167, 69, 0.3)"},children:[(0,x.jsx)("i",{className:"fas fa-credit-card me-2"}),"Proceed to Checkout"]})]})]})]})})]})},k=({onBack:e,cartItems:t,onAddToCart:s,onShowCart:a})=>(0,x.jsx)("div",{className:"store-page position-fixed inset-0",style:{zIndex:1030,paddingTop:"60px",background:"var(--curfd-dark, #0A0F29)"},children:(0,x.jsx)("div",{className:"container-fluid h-100",children:(0,x.jsxs)("div",{className:"row h-100",children:[(0,x.jsx)("div",{className:"col-9 py-4",children:(0,x.jsx)("div",{className:"row g-4",children:[{id:"item-1",name:"ARCTIC Liquid Freezer III Pro A-RGB",color:"#4CAF50",icon:"fas fa-cube",size:"2.5 MB",price:29.99,originalPrice:39.99},{id:"item-2",name:"Corsair NAUTILUS Water 360mm",color:"#2196F3",icon:"fas fa-cube",size:"3.1 MB",price:34.99,originalPrice:44.99},{id:"item-3",name:"Thermalright Peerless Assassin",color:"#9C27B0",icon:"fas fa-cube",size:"1.8 MB",price:24.99,originalPrice:29.99},{id:"item-4",name:"AMD Wraith Stealth Socket",color:"#FF5722",icon:"fas fa-cube",size:"2.2 MB",price:19.99,originalPrice:24.99},{id:"item-5",name:"NZXT Kraken Elite 360mm",color:"#607D8B",icon:"fas fa-cube",size:"2.7 MB",price:39.99,originalPrice:49.99}].map((e,t)=>(0,x.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,x.jsx)("div",{className:"card h-100 shadow-lg border-0",style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"20px",overflow:"hidden",transition:"all 0.3s ease",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-8px)",e.currentTarget.style.boxShadow="0 20px 40px rgba(0, 0, 0, 0.4)",e.currentTarget.style.background="rgba(255, 255, 255, 0.12)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0px)",e.currentTarget.style.boxShadow="0 10px 30px rgba(0, 0, 0, 0.3)",e.currentTarget.style.background="rgba(255, 255, 255, 0.08)"},children:(0,x.jsxs)("div",{className:"card-body p-4",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[(0,x.jsx)("div",{className:"rounded-circle p-3 me-3",style:{background:`linear-gradient(135deg, ${e.color}20, ${e.color}40)`,border:`2px solid ${e.color}30`},children:(0,x.jsx)("i",{className:e.icon,style:{color:e.color,fontSize:"28px"}})}),(0,x.jsxs)("div",{className:"flex-grow-1",children:[(0,x.jsx)("h5",{className:"card-title mb-2 fw-bold text-white",style:{fontSize:"1.1rem"},children:e.name}),(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("span",{className:"badge bg-light text-dark me-2",style:{fontSize:"0.75rem"},children:e.size}),(0,x.jsxs)("small",{className:"text-success fw-semibold",children:[(0,x.jsx)("i",{className:"fas fa-check-circle me-1"}),"Ready to Ship"]})]})]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsxs)("div",{className:"price-section",children:[(0,x.jsxs)("div",{className:"d-flex align-items-baseline",children:[(0,x.jsxs)("span",{className:"fw-bold text-success me-2",style:{fontSize:"1.8rem"},children:["$",e.price]}),e.originalPrice&&(0,x.jsxs)("small",{className:"text-white-50 text-decoration-line-through",children:["$",e.originalPrice]})]}),(0,x.jsx)("small",{className:"text-success fw-semibold",children:"25% OFF Limited Time!"})]}),(0,x.jsxs)("div",{className:"d-flex gap-2",children:[(0,x.jsx)("button",{className:"btn px-3 fw-bold",onClick:()=>s(e),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",borderRadius:"50px",fontSize:"0.85rem",transition:"all 0.2s ease",minWidth:"45px",height:"45px"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0px)",e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:(0,x.jsx)("i",{className:"fas fa-cart-plus"})}),(0,x.jsxs)("button",{className:"btn btn-lg px-4 fw-bold",onClick:()=>(e=>{s(e),setTimeout(()=>{a()},100)})(e),style:{background:"linear-gradient(135deg, #28a745, #20c997)",border:"none",color:"white",borderRadius:"50px",fontSize:"0.9rem",boxShadow:"0 4px 15px rgba(40, 167, 69, 0.3)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(40, 167, 69, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0px)",e.currentTarget.style.boxShadow="0 4px 15px rgba(40, 167, 69, 0.3)"},children:[(0,x.jsx)("i",{className:"fas fa-shopping-cart me-2"}),"Buy Now"]})]})]})]})})},t))})}),(0,x.jsx)("div",{className:"col-3"})]})})});var C=s(8868);const R=({show:e,onClose:t,onSubmit:s})=>{const[n,r]=(0,a.useState)({designName:"",description:"",price:"",category:"",fileOrigin:"",licenseType:"commercial",originDeclaration:!1,qualityAssurance:!1,technicalSpecs:"",tags:"",instructions:""}),i={background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem",borderRadius:"8px"},l={background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem",borderRadius:"8px"},o=e=>{const{name:t,value:s,type:a}=e.target;if("checkbox"===a){const s=e.target.checked;r(e=>({...e,[t]:s}))}else r(e=>({...e,[t]:s}))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("style",{children:"\n          .sell-design-modal input::placeholder,\n          .sell-design-modal textarea::placeholder {\n            color: rgba(255, 255, 255, 0.5) !important;\n            opacity: 1;\n          }\n          .sell-design-modal select option {\n            background-color: #1a1a2e !important;\n            color: white !important;\n          }\n          .sell-design-modal select {\n            color: white !important;\n          }\n        "}),(0,x.jsxs)(S.A,{show:e,onHide:t,size:"lg",centered:!0,backdrop:"static",className:"sell-design-modal",children:[(0,x.jsx)(S.A.Header,{closeButton:!0,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",color:"white"},children:(0,x.jsxs)(S.A.Title,{className:"d-flex align-items-center w-100",children:[(0,x.jsx)("img",{src:"/curfdlogo.png",alt:"CURFD",style:{height:"40px",marginRight:"1rem",filter:"brightness(1.2) contrast(1.1)"}}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:[(0,x.jsx)("i",{className:"fas fa-dollar-sign",style:{color:"#FFD700",marginRight:"0.5rem"}}),"Sell Your Design"]}),(0,x.jsx)("small",{style:{opacity:.9,fontSize:"0.85rem"},children:"Join our marketplace and earn from your creativity"})]})]})}),(0,x.jsx)(S.A.Body,{style:{background:"linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%)",maxHeight:"70vh",overflowY:"auto",padding:"2rem"},children:(0,x.jsxs)(C.A,{onSubmit:e=>{e.preventDefault(),s(n),t(),r({designName:"",description:"",price:"",category:"",fileOrigin:"",licenseType:"commercial",originDeclaration:!1,qualityAssurance:!1,technicalSpecs:"",tags:"",instructions:""})},children:[(0,x.jsxs)("div",{className:"alert mb-4",style:{background:"rgba(102, 126, 234, 0.1)",border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"8px",color:"#a8b3ff"},children:[(0,x.jsx)("i",{className:"fas fa-info-circle me-2"}),"Fill out the details below to list your design on our marketplace. All fields marked with * are required."]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["Design Name ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsx)(C.A.Control,{type:"text",name:"designName",value:n.designName,onChange:o,required:!0,placeholder:"e.g., Premium Aerodynamic Wing Design",style:i,className:"form-control-lg"})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["Description ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsx)(C.A.Control,{as:"textarea",rows:4,name:"description",value:n.description,onChange:o,required:!0,placeholder:"Describe your design in detail. What makes it unique? What problems does it solve?",style:i})]}),(0,x.jsxs)(C.A.Group,{className:"mb-4",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["Price (USD) ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("span",{className:"input-group-text",style:{background:"rgba(102, 126, 234, 0.2)",border:"1px solid rgba(102, 126, 234, 0.3)",color:"#667eea",fontWeight:"bold"},children:(0,x.jsx)("i",{className:"fas fa-dollar-sign"})}),(0,x.jsx)(C.A.Control,{type:"number",name:"price",value:n.price,onChange:o,required:!0,min:"0",step:"0.01",placeholder:"29.99",style:i,className:"form-control-lg"})]}),(0,x.jsx)("small",{style:{color:"#888",marginTop:"0.25rem",display:"block"},children:"Suggested price range: $19.99 - $199.99"})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["Category ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsxs)(C.A.Select,{name:"category",value:n.category,onChange:o,required:!0,style:l,children:[(0,x.jsx)("option",{value:"",style:{color:"rgba(255,255,255,0.5)"},children:"Select a category"}),(0,x.jsx)("option",{value:"aerospace",children:"Aerospace"}),(0,x.jsx)("option",{value:"automotive",children:"Automotive"}),(0,x.jsx)("option",{value:"mechanical",children:"Mechanical"}),(0,x.jsx)("option",{value:"architecture",children:"Architecture"}),(0,x.jsx)("option",{value:"industrial",children:"Industrial"}),(0,x.jsx)("option",{value:"other",children:"Other"})]})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["License Type ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsxs)(C.A.Select,{name:"licenseType",value:n.licenseType,onChange:o,required:!0,style:l,children:[(0,x.jsx)("option",{value:"commercial",children:"Commercial - Full Rights"}),(0,x.jsx)("option",{value:"personal",children:"Personal Use Only"}),(0,x.jsx)("option",{value:"attribution",children:"Attribution Required"}),(0,x.jsx)("option",{value:"non-commercial",children:"Non-Commercial"})]})]})})]}),(0,x.jsxs)(C.A.Group,{className:"mb-4",children:[(0,x.jsxs)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:["File Origin ",(0,x.jsx)("span",{style:{color:"#ff6b6b"},children:"*"})]}),(0,x.jsxs)(C.A.Select,{name:"fileOrigin",value:n.fileOrigin,onChange:o,required:!0,style:l,children:[(0,x.jsx)("option",{value:"",style:{color:"rgba(255,255,255,0.5)"},children:"Select file origin"}),(0,x.jsx)("option",{value:"original",children:"Original Work - Created by Me"}),(0,x.jsx)("option",{value:"modified",children:"Modified from Open Source"}),(0,x.jsx)("option",{value:"commissioned",children:"Commissioned Work (I own rights)"})]})]}),(0,x.jsxs)("div",{style:{border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"1rem",background:"rgba(0, 0, 0, 0.2)",marginBottom:"1.5rem"},children:[(0,x.jsxs)("h6",{style:{color:"#a8b3ff",marginBottom:"1rem"},children:[(0,x.jsx)("i",{className:"fas fa-cog me-2"}),"Additional Details (Optional)"]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"400",fontSize:"0.9rem"},children:"Technical Specifications"}),(0,x.jsx)(C.A.Control,{as:"textarea",rows:2,name:"technicalSpecs",value:n.technicalSpecs,onChange:o,placeholder:"File format, polygon count, dimensions, etc.",style:{...i,fontSize:"0.9rem"}})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"400",fontSize:"0.9rem"},children:"Usage Instructions"}),(0,x.jsx)(C.A.Control,{as:"textarea",rows:2,name:"instructions",value:n.instructions,onChange:o,placeholder:"How to use this design, any special requirements...",style:{...i,fontSize:"0.9rem"}})]}),(0,x.jsxs)(C.A.Group,{className:"mb-0",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"400",fontSize:"0.9rem"},children:"Tags (comma-separated)"}),(0,x.jsx)(C.A.Control,{type:"text",name:"tags",value:n.tags,onChange:o,placeholder:"e.g., aerodynamic, vehicle, high-detail",style:{...i,fontSize:"0.9rem"}})]})]}),(0,x.jsxs)("div",{style:{background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"8px",padding:"1.25rem",marginBottom:"1.5rem"},children:[(0,x.jsxs)("h6",{style:{color:"#ff6b6b",marginBottom:"1rem"},children:[(0,x.jsx)("i",{className:"fas fa-shield-alt me-2"}),"Legal Declarations"]}),(0,x.jsx)(C.A.Group,{className:"mb-3",children:(0,x.jsx)(C.A.Check,{type:"checkbox",name:"originDeclaration",checked:n.originDeclaration,onChange:o,required:!0,label:"I declare that I am the original creator or have the legal rights to sell this design",style:{color:"#e0e0e0"}})}),(0,x.jsx)(C.A.Group,{className:"mb-0",children:(0,x.jsx)(C.A.Check,{type:"checkbox",name:"qualityAssurance",checked:n.qualityAssurance,onChange:o,required:!0,label:"I confirm that this design is of high quality and suitable for its intended use",style:{color:"#e0e0e0"}})})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center gap-3 mt-4",children:[(0,x.jsxs)("button",{type:"button",className:"btn btn-outline-light",onClick:t,style:{padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"500",flex:1},children:[(0,x.jsx)("i",{className:"fas fa-times me-2"}),"Cancel"]}),(0,x.jsxs)("button",{type:"submit",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"white",padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"bold",fontSize:"1.05rem",flex:2,boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},className:"btn",children:[(0,x.jsx)("i",{className:"fas fa-rocket me-2"}),"List Design for Sale"]})]})]})})]})]})};var F=s(1163);const P=({show:e,onClose:t,onAuthSuccess:s,initialMode:n="login"})=>{const[r,i]=(0,a.useState)(n),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[m,u]=(0,a.useState)({email:"",password:""}),[h,g]=(0,a.useState)({firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),p={background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem",borderRadius:"8px"},b=e=>{const{name:t,value:s}=e.target;u(e=>({...e,[t]:s}))},f=e=>{const{name:t,value:s,type:a,checked:n}=e.target;g(e=>({...e,[t]:"checkbox"===a?n:s}))},j=async e=>{d(""),o(!0);try{await new Promise(e=>setTimeout(e,1500));const a={google:{firstName:"John",lastName:"Smith",email:"john.smith@gmail.com"},facebook:{firstName:"Jane",lastName:"Doe",email:"jane.doe@facebook.com"},github:{firstName:"Dev",lastName:"User",email:"dev.user@github.com"},linkedin:{firstName:"Professional",lastName:"User",email:"professional.user@linkedin.com"}}[e],n={id:`${e}_`+Date.now(),email:a.email,firstName:a.firstName,lastName:a.lastName,username:a.email.split("@")[0]};s(n),t()}catch(t){d(`Failed to sign in with ${e}. Please try again.`)}finally{o(!1)}},y=()=>{i("login"===r?"signup":"login"),d("")};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("style",{children:"\n          .auth-modal input::placeholder {\n            color: rgba(255, 255, 255, 0.5) !important;\n            opacity: 1;\n          }\n          .auth-modal .social-btn:hover:not(:disabled) {\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n            opacity: 0.9;\n          }\n          .auth-modal .social-btn:active:not(:disabled) {\n            transform: translateY(0px);\n          }\n          .auth-modal .social-btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n          }\n        "}),(0,x.jsxs)(S.A,{show:e,onHide:t,centered:!0,backdrop:"static",className:"auth-modal",children:[(0,x.jsx)(S.A.Header,{closeButton:!0,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",color:"white"},children:(0,x.jsxs)(S.A.Title,{className:"d-flex align-items-center w-100",children:[(0,x.jsx)("img",{src:"/curfdlogo.png",alt:"CURFD",style:{height:"40px",marginRight:"1rem",filter:"brightness(1.2) contrast(1.1)"}}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:[(0,x.jsx)("i",{className:"fas "+("login"===r?"fa-sign-in-alt":"fa-user-plus"),style:{color:"#FFD700",marginRight:"0.5rem"}}),"login"===r?"Welcome Back":"Join CURFD"]}),(0,x.jsx)("small",{style:{opacity:.9,fontSize:"0.85rem"},children:"login"===r?"Sign in to your account":"Create your account to start selling"})]})]})}),(0,x.jsxs)(S.A.Body,{style:{background:"linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%)",padding:"2rem"},children:[c&&(0,x.jsxs)(F.A,{variant:"danger",style:{background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",color:"#ff6b6b"},children:[(0,x.jsx)("i",{className:"fas fa-exclamation-triangle me-2"}),c]}),"login"===r?(0,x.jsxs)(C.A,{onSubmit:async e=>{e.preventDefault(),d(""),o(!0);try{await new Promise(e=>setTimeout(e,1500));const e={id:"user_"+Date.now(),email:m.email,firstName:"John",lastName:"Doe",username:m.email.split("@")[0]};s(e),t(),u({email:"",password:""})}catch(e){d("Invalid email or password. Please try again.")}finally{o(!1)}},children:[(0,x.jsxs)("div",{className:"alert mb-4",style:{background:"rgba(102, 126, 234, 0.1)",border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"8px",color:"#a8b3ff"},children:[(0,x.jsx)("i",{className:"fas fa-info-circle me-2"}),"Sign in to access the marketplace and start selling your designs."]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("div",{className:"text-center mb-4",children:(0,x.jsx)("div",{style:{color:"#b0b0b0",fontSize:"0.9rem",fontWeight:"400",letterSpacing:"0.5px"},children:"Sign in with your social account"})}),(0,x.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,x.jsxs)("div",{className:"row g-3",children:[(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("google"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(219, 68, 55, 0.1)",border:"1px solid rgba(219, 68, 55, 0.3)",color:"#db4437",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-google",style:{fontSize:"1.1rem",marginRight:"8px"}}),"Google"]})}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("facebook"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(66, 103, 178, 0.1)",border:"1px solid rgba(66, 103, 178, 0.3)",color:"#4267B2",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-facebook-f",style:{fontSize:"1.1rem",marginRight:"8px"}}),"Facebook"]})})]}),(0,x.jsxs)("div",{className:"row g-3",children:[(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("github"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-github",style:{fontSize:"1.1rem",marginRight:"8px"}}),"GitHub"]})}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("linkedin"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(0, 119, 181, 0.1)",border:"1px solid rgba(0, 119, 181, 0.3)",color:"#0077B5",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-linkedin-in",style:{fontSize:"1.1rem",marginRight:"8px"}}),"LinkedIn"]})})]})]}),(0,x.jsxs)("div",{className:"d-flex align-items-center my-5",children:[(0,x.jsx)("hr",{style:{flex:1,border:"none",height:"1px",background:"linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent)"}}),(0,x.jsx)("span",{className:"px-4",style:{color:"#b0b0b0",fontSize:"0.85rem",fontWeight:"400",letterSpacing:"0.5px",whiteSpace:"nowrap"},children:"or continue with email"}),(0,x.jsx)("hr",{style:{flex:1,border:"none",height:"1px",background:"linear-gradient(to left, transparent, rgba(255, 255, 255, 0.2), transparent)"}})]})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Email Address"}),(0,x.jsx)(C.A.Control,{type:"email",name:"email",value:m.email,onChange:b,required:!0,placeholder:"Enter your email",style:p,className:"form-control-lg"})]}),(0,x.jsxs)(C.A.Group,{className:"mb-4",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Password"}),(0,x.jsx)(C.A.Control,{type:"password",name:"password",value:m.password,onChange:b,required:!0,placeholder:"Enter your password",style:p,className:"form-control-lg"})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[(0,x.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:t,disabled:l,style:{padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"500",flex:1},children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:l,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"white",padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"bold",fontSize:"1.05rem",flex:2,boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},className:"btn",children:l?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("i",{className:"fas fa-spinner fa-spin me-2"}),"Signing In..."]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("i",{className:"fas fa-sign-in-alt me-2"}),"Sign In"]})})]}),(0,x.jsxs)("div",{className:"text-center mt-4",children:[(0,x.jsx)("span",{style:{color:"#888"},children:"Don't have an account? "}),(0,x.jsx)("button",{type:"button",onClick:y,style:{background:"none",border:"none",color:"#667eea",textDecoration:"underline",cursor:"pointer"},children:"Sign up here"})]})]}):(0,x.jsxs)(C.A,{onSubmit:async e=>{if(e.preventDefault(),d(""),h.password===h.confirmPassword)if(h.password.length<6)d("Password must be at least 6 characters long.");else{o(!0);try{await new Promise(e=>setTimeout(e,2e3));const e={id:"user_"+Date.now(),email:h.email,firstName:h.firstName,lastName:h.lastName,username:h.username};s(e),t(),g({firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1})}catch(e){d("Failed to create account. Please try again.")}finally{o(!1)}}else d("Passwords do not match.")},children:[(0,x.jsxs)("div",{className:"alert mb-4",style:{background:"rgba(102, 126, 234, 0.1)",border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"8px",color:"#a8b3ff"},children:[(0,x.jsx)("i",{className:"fas fa-rocket me-2"}),"Join thousands of creators earning from their designs on CURFD."]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("div",{className:"text-center mb-4",children:(0,x.jsx)("div",{style:{color:"#b0b0b0",fontSize:"0.9rem",fontWeight:"400",letterSpacing:"0.5px"},children:"Quick signup with your social account"})}),(0,x.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,x.jsxs)("div",{className:"row g-3",children:[(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("google"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(219, 68, 55, 0.1)",border:"1px solid rgba(219, 68, 55, 0.3)",color:"#db4437",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-google",style:{fontSize:"1.1rem",marginRight:"8px"}}),"Google"]})}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("facebook"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(66, 103, 178, 0.1)",border:"1px solid rgba(66, 103, 178, 0.3)",color:"#4267B2",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-facebook-f",style:{fontSize:"1.1rem",marginRight:"8px"}}),"Facebook"]})})]}),(0,x.jsxs)("div",{className:"row g-3",children:[(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("github"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-github",style:{fontSize:"1.1rem",marginRight:"8px"}}),"GitHub"]})}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("button",{type:"button",onClick:()=>j("linkedin"),disabled:l,className:"btn w-100 social-btn d-flex align-items-center justify-content-center",style:{background:"rgba(0, 119, 181, 0.1)",border:"1px solid rgba(0, 119, 181, 0.3)",color:"#0077B5",padding:"0.85rem 1rem",borderRadius:"10px",fontWeight:"500",fontSize:"0.9rem",transition:"all 0.2s ease",minHeight:"45px"},children:[(0,x.jsx)("i",{className:"fab fa-linkedin-in",style:{fontSize:"1.1rem",marginRight:"8px"}}),"LinkedIn"]})})]})]}),(0,x.jsxs)("div",{className:"d-flex align-items-center my-5",children:[(0,x.jsx)("hr",{style:{flex:1,border:"none",height:"1px",background:"linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent)"}}),(0,x.jsx)("span",{className:"px-4",style:{color:"#b0b0b0",fontSize:"0.85rem",fontWeight:"400",letterSpacing:"0.5px",whiteSpace:"nowrap"},children:"or create account with email"}),(0,x.jsx)("hr",{style:{flex:1,border:"none",height:"1px",background:"linear-gradient(to left, transparent, rgba(255, 255, 255, 0.2), transparent)"}})]})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"First Name"}),(0,x.jsx)(C.A.Control,{type:"text",name:"firstName",value:h.firstName,onChange:f,required:!0,placeholder:"First name",style:p})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Last Name"}),(0,x.jsx)(C.A.Control,{type:"text",name:"lastName",value:h.lastName,onChange:f,required:!0,placeholder:"Last name",style:p})]})})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Username"}),(0,x.jsx)(C.A.Control,{type:"text",name:"username",value:h.username,onChange:f,required:!0,placeholder:"Choose a username",style:p})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Email Address"}),(0,x.jsx)(C.A.Control,{type:"email",name:"email",value:h.email,onChange:f,required:!0,placeholder:"Enter your email",style:p})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Password"}),(0,x.jsx)(C.A.Control,{type:"password",name:"password",value:h.password,onChange:f,required:!0,placeholder:"Create password",style:p})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{style:{color:"#e0e0e0",fontWeight:"500"},children:"Confirm Password"}),(0,x.jsx)(C.A.Control,{type:"password",name:"confirmPassword",value:h.confirmPassword,onChange:f,required:!0,placeholder:"Confirm password",style:p})]})})]}),(0,x.jsx)(C.A.Group,{className:"mb-4",children:(0,x.jsx)(C.A.Check,{type:"checkbox",name:"agreeToTerms",checked:h.agreeToTerms,onChange:f,required:!0,label:(0,x.jsxs)("span",{style:{color:"#e0e0e0"},children:["I agree to the ",(0,x.jsx)("span",{style:{color:"#667eea",textDecoration:"underline",cursor:"pointer"},children:"Terms of Service"})," and ",(0,x.jsx)("span",{style:{color:"#667eea",textDecoration:"underline",cursor:"pointer"},children:"Privacy Policy"})]})})}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[(0,x.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:t,disabled:l,style:{padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"500",flex:1},children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:l,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"white",padding:"0.75rem 2rem",borderRadius:"8px",fontWeight:"bold",fontSize:"1.05rem",flex:2,boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},className:"btn",children:l?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("i",{className:"fas fa-spinner fa-spin me-2"}),"Creating Account..."]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("i",{className:"fas fa-user-plus me-2"}),"Create Account"]})})]}),(0,x.jsxs)("div",{className:"text-center mt-4",children:[(0,x.jsx)("span",{style:{color:"#888"},children:"Already have an account? "}),(0,x.jsx)("button",{type:"button",onClick:y,style:{background:"none",border:"none",color:"#667eea",textDecoration:"underline",cursor:"pointer"},children:"Sign in here"})]})]})]})]}),(0,x.jsx)("style",{children:"\n          .social-btn {\n            position: relative;\n            overflow: hidden;\n          }\n          \n          .social-btn:hover:not(:disabled) {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);\n          }\n          \n          .social-btn:hover:not(:disabled):before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(255, 255, 255, 0.1);\n            pointer-events: none;\n          }\n          \n          .social-btn:active:not(:disabled) {\n            transform: translateY(0);\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n          }\n          \n          .social-btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n          }\n          \n          .social-btn i {\n            transition: transform 0.2s ease;\n          }\n          \n          .social-btn:hover:not(:disabled) i {\n            transform: scale(1.1);\n          }\n        "})]})},T=({onUploadModel:e,onResetView:t,onToggleGrid:s,onAutoRotate:a,onScreenshot:n,gridVisible:r,autoRotateEnabled:i})=>{const l=e=>{const t="btn rounded-pill mx-1 border-0";return e?`${t} btn-primary text-white`:`${t} btn-outline-secondary text-white`};return(0,x.jsxs)("div",{className:"bg-light bg-opacity-75 rounded-pill p-2 border border-secondary d-flex",children:[(0,x.jsxs)("button",{className:l(r),onClick:s,children:[(0,x.jsx)("i",{className:"fas fa-th me-2"}),"Grid"]}),(0,x.jsxs)("button",{className:l(i),onClick:a,children:[(0,x.jsx)("i",{className:"fas fa-sync-alt me-2"}),"Auto Rotate"]}),(0,x.jsxs)("button",{className:l(!1),onClick:t,children:[(0,x.jsx)("i",{className:"fas fa-refresh me-2"}),"Reset View"]}),(0,x.jsxs)("button",{className:l(!1),onClick:e,children:[(0,x.jsx)("i",{className:"fas fa-upload me-2"}),"Upload"]}),(0,x.jsxs)("button",{className:l(!1),onClick:n,children:[(0,x.jsx)("i",{className:"fas fa-camera me-2"}),"Screenshot"]})]})};async function z(e,t,s="gpt-4-turbo",a){return a?.apiUrl||process.env.REACT_APP_AI_API_URL?async function(e,t,s,a){const n=a?.apiUrl||process.env.REACT_APP_AI_API_URL;if(!n)return"[API URL not configured]";try{if(t){const a=new FormData;a.append("message",e),a.append("file",t),s&&a.append("model",s);const r=await fetch(n,{method:"POST",body:a});if(!r.ok)throw new Error(`API returned ${r.status}`);const i=await r.json();return i?.reply||JSON.stringify(i)}const a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,model:s})});if(!a.ok)throw new Error(`API returned ${a.status}`);const r=await a.json();return r?.reply||JSON.stringify(r)}catch(e){return console.error("API error:",e),`[API error] ${e?.message||String(e)}`}}(e,t,s,a):s.startsWith("gpt-")?async function(e,t,s="gpt-4-turbo",a){const n=a?.apiKey||process.env.REACT_APP_OPENAI_API_KEY;if(!n)return"[OpenAI API key not configured]";try{let a=[{role:"user",content:e}];if(t){const s=await new Promise(e=>{const s=new FileReader;s.onload=()=>e(s.result),s.readAsDataURL(t)});a=[{role:"system",content:"The user is uploading a 3D model file for analysis."},{role:"user",content:`Analyzing file: ${t.name}\nBase64 data: ${s}\n\nUser message: ${e}`}]}const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({model:s,messages:a,temperature:.7})});if(!r.ok)throw new Error(`OpenAI API returned ${r.status}`);const i=await r.json();return i.choices?.[0]?.message?.content||JSON.stringify(i)}catch(e){return console.error("OpenAI API error:",e),`[OpenAI error] ${e?.message||String(e)}`}}(e,t,s,a):s.startsWith("claude-")?async function(e,t,s="claude-3-opus-20240229",a){const n=a?.apiKey||process.env.REACT_APP_ANTHROPIC_API_KEY;if(!n)return"[Claude API key not configured]";try{let a=[{role:"user",content:e}];if(t){const s=await new Promise(e=>{const s=new FileReader;s.onload=()=>e(s.result),s.readAsDataURL(t)});a=[{role:"system",content:"You are analyzing 3D model files for CFD simulation."},{role:"user",content:`File: ${t.name}\nData: ${s}\n\nQuery: ${e}`}]}const r=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":n,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:s,messages:a,max_tokens:1024})});if(!r.ok)throw new Error(`Claude API returned ${r.status}`);const i=await r.json();return i.content?.[0]?.text||JSON.stringify(i)}catch(e){return console.error("Claude API error:",e),`[Claude error] ${e?.message||String(e)}`}}(e,t,s,a):"gemini-pro"===s?async function(e,t,s){const a=s?.apiKey||process.env.REACT_APP_GEMINI_API_KEY;if(!a)return"[Gemini API key not configured]";try{const s=[{text:e}];if(t){const e=await new Promise(e=>{const s=new FileReader;s.onload=()=>e(s.result),s.readAsDataURL(t)});s.push({inlineData:{mimeType:t.type,data:e.split(",")[1]}})}const n=await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:s}]})});if(!n.ok)throw new Error(`Gemini API returned ${n.status}`);const r=await n.json();return r.candidates?.[0]?.content?.parts?.[0]?.text||JSON.stringify(r)}catch(e){return console.error("Gemini API error:",e),`[Gemini error] ${e?.message||String(e)}`}}(e,t,a):"openfoam"===s?"[OpenFOAM integration not yet implemented]":`[Unknown model: ${s}] Please configure an AI provider`}s(3110),s(94);const I=()=>{const e=(()=>{try{const e=localStorage.getItem("curfd-app-state"),t=localStorage.getItem("curfd-has-uploaded-file"),s=localStorage.getItem("curfd-user-data");if(e){const a=JSON.parse(e);return{state:{leftDockExpanded:!1,isTyping:!1,chatMessages:[{type:"ai",content:"Hello! I'm CURFD AI. Upload a 3D model to begin CFD analysis.",time:(new Date).toLocaleTimeString()}],selectedAiModel:"gpt-4-turbo",uploadedFiles:[],status:"Ready for analysis",gridVisible:!0,autoRotateEnabled:!1,view:"main",...a},hasFile:!!t&&JSON.parse(t),user:s?JSON.parse(s):null}}}catch(e){console.warn("Failed to load state from localStorage:",e)}return{state:{leftDockExpanded:!1,isTyping:!1,chatMessages:[{type:"ai",content:"Hello! I'm CURFD AI. Upload a 3D model to begin CFD analysis.",time:(new Date).toLocaleTimeString()}],selectedAiModel:"gpt-4-turbo",uploadedFiles:[],status:"Ready for analysis",gridVisible:!0,autoRotateEnabled:!1,view:"main"},hasFile:!1,user:null}})(),[t,s]=(0,a.useState)(e.state),[n,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(e.user),[g,p]=(0,a.useState)(e.hasFile),[b,f]=(0,a.useState)(0),[v,N]=(0,a.useState)("store"===e.state.view&&e.hasFile),S=(0,a.useRef)(null),C=(0,a.useRef)(null),F=(0,a.useRef)(null),T=e=>{s(t=>({...t,...e}))};(0,a.useEffect)(()=>{((e,t,s)=>{try{const a={...e,chatMessages:e.chatMessages.slice(-5)};localStorage.setItem("curfd-app-state",JSON.stringify(a)),localStorage.setItem("curfd-has-uploaded-file",JSON.stringify(t)),s?localStorage.setItem("curfd-user-data",JSON.stringify(s)):localStorage.removeItem("curfd-user-data")}catch(e){console.warn("Failed to save state to localStorage:",e)}})(t,g,u)},[t,g,u]),(0,a.useEffect)(()=>{(async()=>{if(console.log("RestoreState - hasUploadedFile:",g,"view:",t.view,"uploadedFiles:",t.uploadedFiles),await new Promise(e=>setTimeout(e,1e3)),g&&t.uploadedFiles.length>0){const e=t.uploadedFiles[0];console.log("Attempting to restore file:",e.name,"in view:",t.view),"main"===t.view&&(T({status:"Restoring previous model..."}),setTimeout(()=>{T({status:`Please re-upload ${e.name} to continue analysis`}),p(!1),T({uploadedFiles:[]})},2e3))}})()},[]),(0,a.useEffect)(()=>{if(console.log("View changed to:",t.view,"hasUploadedFile:",g),"main"===t.view&&g&&t.uploadedFiles.length>0){const e=t.uploadedFiles[0];console.log("In main view with file info:",e.name),setTimeout(()=>{v&&(console.log("Was refreshed in store, prompting re-upload"),N(!1),T({status:`Session restored. Please re-upload ${e.name} to continue analysis.`}),setTimeout(()=>{p(!1),T({uploadedFiles:[],status:"Ready for analysis"})},3e3))},500)}},[t.view]);const I=(e,t)=>{console.log(`Three action: ${e}`,t),S.current&&S.current[e]?S.current[e](t):console.warn(`Three action ${e} not available`)};(0,a.useEffect)(()=>{const e=()=>{const e=F.current;if(!e)return;const t=e.getBoundingClientRect();f(t.top+t.height+12)};e();const t=F.current;let s=null;return t&&"ResizeObserver"in window&&(s=new ResizeObserver(e),s.observe(t)),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),s&&t&&s.unobserve(t)}},[]);return(0,x.jsxs)("div",{className:"app vh-100 vw-100 p-0 m-0 bg-dark overflow-hidden",children:[(0,x.jsxs)("div",{className:"fixed-top d-flex align-items-center px-4 py-2",style:{zIndex:1050,background:"var(--chat-bg)",backdropFilter:"blur(20px)",borderBottom:"1px solid var(--chat-border)"},children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:"/curfdlogo.png",alt:"CURFD",style:{height:"40px",filter:"brightness(1.2) contrast(1.1)"}}),(0,x.jsxs)("div",{className:"d-flex flex-column",children:[(0,x.jsx)("strong",{className:"text-white",style:{fontSize:"1.2rem"},children:"CURFD"}),(0,x.jsx)("small",{className:"text-white-50",children:"V3 - Advanced AI CFD Engine"})]})]}),(0,x.jsxs)("div",{className:"ms-auto d-flex align-items-center gap-3",children:[u&&(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,x.jsxs)("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",fontWeight:"bold",fontSize:"0.9rem"},children:[u.firstName.charAt(0),u.lastName.charAt(0)]}),(0,x.jsxs)("div",{className:"d-flex flex-column",children:[(0,x.jsxs)("small",{className:"text-white",style:{fontSize:"0.8rem",lineHeight:1},children:[u.firstName," ",u.lastName]}),(0,x.jsx)("button",{onClick:()=>{h(null),T({status:"Logged out successfully."})},style:{background:"none",border:"none",color:"#667eea",fontSize:"0.7rem",padding:0,textDecoration:"underline",cursor:"pointer",lineHeight:1},children:"Logout"})]})]}),(0,x.jsx)("span",{className:"text-white-50",children:t.status})]})]}),(0,x.jsx)("div",{className:"position-fixed inset-0 w-100 h-100",style:{top:"60px",opacity:"main"===t.view?1:0,pointerEvents:"main"===t.view?"auto":"none",zIndex:"main"===t.view?1:-1},children:(0,x.jsx)(j,{ref:S,onStateUpdate:T,appState:t})}),"store"===t.view&&(0,x.jsx)(k,{onBack:()=>T({view:"main"}),cartItems:d,onAddToCart:e=>{m(t=>{if(t.find(t=>t.id===e.id))return t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t);{const s={id:e.id,name:e.name,price:e.price,originalPrice:e.originalPrice,size:e.size||"0 MB",color:e.color,icon:e.icon,quantity:1};return[...t,s]}})},onShowCart:()=>c(!0)}),(0,x.jsx)("div",{ref:F,className:"position-fixed",style:{top:"76px",right:"16px",width:"400px",zIndex:1040},children:(0,x.jsx)(w,{onSendMessage:async(e,s)=>{const a={type:"user",content:e||(s?`Uploaded ${s.name}`:""),time:(new Date).toLocaleTimeString()};T({chatMessages:[...t.chatMessages,a],isTyping:!0}),s&&(I("loadFile",s),p(!0),T({status:`Loading ${s.name}...`,uploadedFiles:[{name:s.name,size:`${(s.size/1048576).toFixed(1)} MB`,color:"#4CAF50",icon:"fas fa-cube"}]})),I("processMessage",{message:e,file:s});let n="";try{n=await z(e,s,t.selectedAiModel)}catch(e){n=`[AI error] ${e?.message||String(e)}`}const r={type:"ai",content:n,time:(new Date).toLocaleTimeString()};T({chatMessages:[...t.chatMessages,a,r],isTyping:!1})},selectedModel:t.selectedAiModel,onModelChange:e=>T({selectedAiModel:e})})}),(0,x.jsx)(y,{visible:g&&"main"===t.view,onClose:()=>{},placement:{top:b,right:16}}),(0,x.jsx)("div",{className:"fab-container",children:"main"===t.view?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:"fab-button",onClick:()=>T({view:"store"}),children:"Store"}),(0,x.jsx)("button",{className:"fab-button "+(t.gridVisible?"active":""),onClick:()=>{const e=!t.gridVisible;T({gridVisible:e}),I("toggleGrid")},children:"Grid"}),(0,x.jsx)("button",{className:"fab-button "+(t.autoRotateEnabled?"active":""),onClick:()=>{const e=!t.autoRotateEnabled;T({autoRotateEnabled:e}),I("toggleAutoRotate")},children:"Auto Rotate"}),(0,x.jsx)("button",{className:"fab-button",onClick:()=>{console.log("Reset view called"),I("resetCamera")},children:"Reset View"}),(0,x.jsx)("button",{className:"fab-button",onClick:()=>C.current?.click(),children:"Upload"}),(0,x.jsx)("button",{className:"fab-button",onClick:()=>I("takeScreenshot"),children:"Screenshot"}),g&&(0,x.jsxs)("button",{className:"fab-button",onClick:()=>{u?r(!0):l(!0)},style:{minWidth:"140px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,x.jsx)("span",{style:{color:"#FFD700",fontSize:"1.1rem",fontWeight:"bold"},children:"$"}),(0,x.jsx)("span",{children:"Sell Design"})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:"fab-button",onClick:()=>T({view:"main"}),children:"Back"}),(0,x.jsx)("button",{className:"fab-button",onClick:()=>console.log("Sort by price"),children:"Sort by Price"}),(0,x.jsx)("button",{className:"fab-button",onClick:()=>console.log("Filter"),children:"Filter"}),(0,x.jsxs)("button",{className:"fab-button",onClick:()=>c(!0),style:{position:"relative"},children:[(0,x.jsx)("i",{className:"fas fa-shopping-cart me-2"}),"Cart",d.length>0&&(0,x.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{background:"#dc3545",fontSize:"0.7rem",minWidth:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:d.reduce((e,t)=>e+t.quantity,0)})]})]})}),(0,x.jsx)("input",{ref:C,type:"file",className:"d-none",accept:".stl,.obj,.step,.stp,.iges,.glb",onChange:e=>{if(console.log("File input changed",e.target.files),e.target.files?.[0]){const t=e.target.files[0];I("loadFile",t),p(!0),T({status:`Loading ${t.name}...`,uploadedFiles:[{name:t.name,size:`${(t.size/1048576).toFixed(1)} MB`,color:"#4CAF50",icon:"fas fa-cube"}]}),setTimeout(()=>{T({status:`${t.name} loaded - Analysis ready`})},1e3),e.target.value=""}}}),"main"===t.view&&(0,x.jsxs)("div",{className:"position-fixed start-0 ms-4 rounded chat-container",style:{zIndex:1040,top:"50%",transform:"translateY(-50%)",padding:"1.25rem",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsxs)("div",{className:"d-flex flex-column justify-content-between",style:{height:"260px"},children:[(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:"0.75rem",textAlign:"right"},children:"100 kPa"}),(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:"0.75rem",textAlign:"right"},children:"75"}),(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:"0.75rem",textAlign:"right"},children:"50"}),(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:"0.75rem",textAlign:"right"},children:"25"}),(0,x.jsx)("div",{className:"text-white-50",style:{fontSize:"0.75rem",textAlign:"right"},children:"0 kPa"})]}),(0,x.jsxs)("div",{className:"d-flex flex-column align-items-center gap-2",children:[(0,x.jsx)("div",{className:"text-white small mb-1 fw-bold",children:"High"}),(0,x.jsxs)("div",{style:{width:"32px",height:"220px",background:"linear-gradient(to bottom, #F44336, #FFC107, #4CAF50)",borderRadius:"14px",boxShadow:"0 6px 20px rgba(0,0,0,0.4) inset, 0 4px 12px rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.08)",position:"relative"},children:[(0,x.jsx)("div",{style:{position:"absolute",left:"-8px",top:"0",width:"8px",height:"1px",background:"rgba(255,255,255,0.3)"}}),(0,x.jsx)("div",{style:{position:"absolute",left:"-8px",top:"25%",width:"8px",height:"1px",background:"rgba(255,255,255,0.3)"}}),(0,x.jsx)("div",{style:{position:"absolute",left:"-8px",top:"50%",width:"8px",height:"1px",background:"rgba(255,255,255,0.3)"}}),(0,x.jsx)("div",{style:{position:"absolute",left:"-8px",top:"75%",width:"8px",height:"1px",background:"rgba(255,255,255,0.3)"}}),(0,x.jsx)("div",{style:{position:"absolute",left:"-8px",bottom:"0",width:"8px",height:"1px",background:"rgba(255,255,255,0.3)"}})]}),(0,x.jsx)("div",{className:"text-white small mt-1 fw-bold",children:"Low"})]})]}),(0,x.jsx)("div",{className:"text-white-50 small text-center mt-3",style:{width:"140px"},children:"Pressure Distribution"})]}),(0,x.jsx)(R,{show:n,onClose:()=>r(!1),onSubmit:e=>{console.log("Design submitted for sale:",e,"by user:",u),T({status:`${e.designName} listed successfully! It will be reviewed and published soon.`})}}),(0,x.jsx)(P,{show:i,onClose:()=>l(!1),onAuthSuccess:e=>{h(e),l(!1),T({status:`Welcome ${e.firstName}! You can now list your design for sale.`}),setTimeout(()=>{r(!0)},500)},initialMode:"signup"}),(0,x.jsx)(A,{show:o,onClose:()=>c(!1),cartItems:d,onUpdateQuantity:(e,t)=>{m(s=>s.map(s=>s.id===e?{...s,quantity:t}:s))},onRemoveItem:e=>{m(t=>t.filter(t=>t.id!==e))},onCheckout:()=>{console.log("Proceeding to checkout with items:",d),alert("Checkout functionality will be implemented in the next phase!"),c(!1)}})]})};var L=s(4264),D=s(1660),E=s(1038),M=s(9211),B=s(9101),O=s(6132),W=s(4917);const $={apiUrl:"http://localhost:8000",googleOAuthUrl:"http://localhost:8000/auth/google"}.apiUrl,U=W.A.create({baseURL:`${$}/api/v1`,headers:{"Content-Type":"application/json"}});U.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),U.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("authToken"),window.location.href="/login"),Promise.reject(e)));const G=async e=>(await U.post("/models/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,q=async(e=100,t=0)=>(await U.get(`/models/?limit=${e}&offset=${t}`)).data,_=U;function H(e){return e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}function Y(e,t){return Array.isArray(e)?e.map(e=>Y(e,t)):null!==e&&"object"==typeof e?Object.keys(e).reduce((s,a)=>(s[t(a)]=Y(e[a],t),s),{}):e}const J=({onModelSelect:e,onBackToMain:t})=>{const[s,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)("");(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{i(!0);const e=(await q()).map(e=>function(e){return Y(e,H)}(e));n(e)}catch(e){o("Failed to load models"),console.error("Error fetching models:",e)}finally{i(!1)}},d=e=>{switch(e){case"completed":return(0,x.jsx)(L.A,{bg:"success",children:"Completed"});case"in-progress":return(0,x.jsx)(L.A,{bg:"warning",children:"In Progress"});case"pending":default:return(0,x.jsx)(L.A,{bg:"secondary",children:"Pending"});case"error":return(0,x.jsx)(L.A,{bg:"danger",children:"Error"})}},m=e=>({stl:"fas fa-cube",obj:"fas fa-shapes",glb:"fas fa-cube",gltf:"fas fa-cube",step:"fas fa-project-diagram",stp:"fas fa-project-diagram"}[e]||"fas fa-file"),u=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return r?(0,x.jsx)("div",{className:"bg-light min-vh-100 text-white",children:(0,x.jsx)(D.A,{className:"py-4",children:(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)(E.A,{animation:"border",role:"status",className:"mb-3",children:(0,x.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,x.jsx)("p",{children:"Loading your models..."})]})})})}):l?(0,x.jsx)("div",{className:"bg-light min-vh-100 text-white",children:(0,x.jsx)(D.A,{className:"py-4",children:(0,x.jsx)("div",{className:"alert alert-danger",role:"alert",children:l})})}):(0,x.jsx)("div",{className:"bg-light min-vh-100 text-white",children:(0,x.jsxs)(D.A,{className:"py-4",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h1",{className:"h3 mb-1",children:[(0,x.jsx)("i",{className:"fas fa-folder-open text-primary me-2"}),"My Models"]}),(0,x.jsxs)("p",{className:"text-muted mb-0",children:[s.length," model",1!==s.length?"s":""," uploaded"]})]}),(0,x.jsxs)("button",{className:"btn btn-outline-primary",onClick:t,children:[(0,x.jsx)("i",{className:"fas fa-arrow-left me-2"}),"Back to Analysis"]})]}),(0,x.jsx)(M.A,{children:s.map(t=>(0,x.jsx)(B.A,{lg:4,md:6,className:"mb-4",children:(0,x.jsxs)(O.A,{className:"h-100 bg-light border-secondary hover-shadow",children:[(0,x.jsxs)("div",{className:"position-relative",children:[t.thumbnail?(0,x.jsx)(O.A.Img,{variant:"top",src:t.thumbnail,alt:`Thumbnail for ${t.name}`,style:{height:"200px",objectFit:"cover",borderTopLeftRadius:"0.375rem",borderTopRightRadius:"0.375rem"}}):(0,x.jsx)("div",{className:"bg-secondary bg-opacity-25 d-flex align-items-center justify-content-center",style:{height:"200px",borderTopLeftRadius:"0.375rem",borderTopRightRadius:"0.375rem"},children:(0,x.jsx)("i",{className:`${m(t.fileType)} text-primary`,style:{fontSize:"3rem"}})}),(0,x.jsx)("div",{className:"position-absolute top-0 end-0 m-2",children:d(t.analysisStatus)})]}),(0,x.jsxs)(O.A.Body,{className:"d-flex flex-column",children:[(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("h6",{className:"card-title text-white mb-1",children:t.name}),(0,x.jsxs)("small",{className:"text-muted",children:[(0,x.jsx)("i",{className:`${m(t.fileType)} me-1`}),t.fileType.toUpperCase()," â€¢ ",t.fileSize]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[t.tags.slice(0,3).map((e,t)=>(0,x.jsx)(L.A,{bg:"outline-secondary",text:"muted",className:"me-1 mb-1 border border-secondary",style:{fontSize:"0.7rem"},children:e},t)),t.tags.length>3&&(0,x.jsxs)(L.A,{bg:"outline-secondary",text:"muted",className:"border border-secondary",style:{fontSize:"0.7rem"},children:["+",t.tags.length-3]})]}),(0,x.jsx)("div",{className:"mt-auto",children:(0,x.jsxs)("div",{className:"d-flex justify-content-between text-muted small",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fas fa-calendar me-1"}),u(t.createdAt)]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fas fa-clock me-1"}),u(t.lastOpened)]})]})})]}),(0,x.jsx)(O.A.Footer,{className:"bg-light border-secondary",children:(0,x.jsx)("div",{className:"d-grid gap-2",children:(0,x.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>e(t),children:[(0,x.jsx)("i",{className:"fas fa-wind me-2"}),"Analyze Model"]})})})]})},t.id))}),0===s.length&&(0,x.jsxs)("div",{className:"text-center py-5",children:[(0,x.jsx)("div",{className:"mb-4",children:(0,x.jsx)("i",{className:"fas fa-folder-open text-muted",style:{fontSize:"4rem"}})}),(0,x.jsx)("h4",{className:"text-muted mb-3",children:"No models uploaded yet"}),(0,x.jsx)("p",{className:"text-muted mb-4",children:"Upload your first 3D model to get started with CFD analysis."}),(0,x.jsxs)("button",{className:"btn btn-primary",onClick:t,children:[(0,x.jsx)("i",{className:"fas fa-upload me-2"}),"Upload First Model"]})]})]})})},V=async(e,t)=>{const s=new URLSearchParams;s.append("username",e),s.append("password",t);return(await _.post("/login",s.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},K=async e=>(await _.post("/auth/user",e)).data,Q=async()=>(await _.get("/user/me/")).data,Z=async()=>(await _.post("/auth/logout")).data,X=(0,a.createContext)(void 0),ee=({children:e})=>{const[t,s]=(0,a.useState)(null),[n,r]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i()},[]);const i=async()=>{if(localStorage.getItem("authToken"))try{const e=await Q();s(e)}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("authToken")}r(!1)},l={user:t,login:async(e,t)=>{const a=await V(e,t);localStorage.setItem("authToken",a.access_token);const n=await Q();s(n)},register:async(e,t,a,n)=>{const r=await K({username:e,email:t,password:a,full_name:n});localStorage.setItem("authToken",r.access_token);const i=await Q();s(i)},logout:()=>{localStorage.removeItem("authToken"),s(null),Z().catch(console.error)},loading:n};return(0,x.jsx)(X.Provider,{value:l,children:e})},te=()=>{const e=(0,a.useContext)(X);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},se=({onUpload:e,onCancel:t})=>{const[s,n]=(0,a.useState)(null),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,j]=(0,a.useState)("meters"),[y,v]=(0,a.useState)(1),[N,w]=(0,a.useState)(!1),[S,A]=(0,a.useState)(""),{user:k}=te(),R=e=>`btn ${"primary"===e?"btn-primary text-white":"btn-secondary text-white"} rounded`;return(0,x.jsxs)(C.A,{onSubmit:async t=>{if(t.preventDefault(),s&&k){w(!0),A("");try{const t=new FormData;t.append("file",s),t.append("name",r||s.name),t.append("description",l),t.append("tags",JSON.stringify(c.split(",").map(e=>e.trim()).filter(Boolean))),t.append("project_name",m),t.append("designer",h),t.append("revision",p),t.append("units",f),t.append("scale_factor",y.toString()),t.append("components","[]");const a=await G(t);e(a,s),n(null),i(""),o(""),d(""),u(""),g(""),b("")}catch(e){A(e.response?.data?.detail||"Upload failed")}finally{w(!1)}}},className:"p-3 bg-light rounded",children:[S&&(0,x.jsx)(F.A,{variant:"danger",children:S}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"3D Model File *"}),(0,x.jsx)(C.A.Control,{type:"file",accept:".stl,.obj,.glb,.gltf,.step,.stp",onChange:e=>{const t=e.target.files?.[0];if(!t)return;const s=t.name.split(".").pop()?.toLowerCase()??"";if(!["stl","obj","glb","gltf","step","stp"].includes(s))return A("Unsupported file type. Allowed: STL, OBJ, GLB, GLTF, STEP, STP"),void n(null);n(t),r||i(t.name.replace(/\.[^/.]+$/,"")),A("")},required:!0,disabled:N})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Model Name *"}),(0,x.jsx)(C.A.Control,{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Enter model name",required:!0,disabled:N})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Description"}),(0,x.jsx)(C.A.Control,{as:"textarea",rows:3,value:l,onChange:e=>o(e.target.value),placeholder:"Optional description",disabled:N})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Tags"}),(0,x.jsx)(C.A.Control,{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Comma-separated tags: aerodynamics, vehicle, etc.",disabled:N})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Project Name"}),(0,x.jsx)(C.A.Control,{type:"text",value:m,onChange:e=>u(e.target.value),disabled:N})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Designer"}),(0,x.jsx)(C.A.Control,{type:"text",value:h,onChange:e=>g(e.target.value),disabled:N})]})})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Revision"}),(0,x.jsx)(C.A.Control,{type:"text",value:p,onChange:e=>b(e.target.value),disabled:N})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Units"}),(0,x.jsxs)(C.A.Select,{value:f,onChange:e=>j(e.target.value),disabled:N,children:[(0,x.jsx)("option",{value:"meters",children:"Meters"}),(0,x.jsx)("option",{value:"millimeters",children:"Millimeters"}),(0,x.jsx)("option",{value:"inches",children:"Inches"}),(0,x.jsx)("option",{value:"feet",children:"Feet"})]})]})})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Scale Factor"}),(0,x.jsx)(C.A.Control,{type:"number",step:"0.1",value:y,onChange:e=>v(parseFloat(e.target.value)),disabled:N})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,x.jsx)("button",{type:"button",className:R("secondary"),onClick:t,disabled:N,children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:R("primary"),disabled:!s||N,children:N?(0,x.jsx)(E.A,{animation:"border",size:"sm"}):"Upload Model"})]})]})},ae=()=>{const e=(0,a.useRef)(null),[t,s]=(0,a.useState)(null),[n,r]=(0,a.useState)({gridVisible:!0,autoRotateEnabled:!1,chatMessages:[],leftDockExpanded:!1,selectedAiModel:"gpt-4-turbo",status:"Ready for upload",uploadedFiles:[],isTyping:!1,view:"main"});return(0,x.jsxs)("div",{className:"p-3",children:[(0,x.jsx)(se,{onUpload:(t,a)=>{console.log("Model selected:",t),console.log("File:",a),s(t),r(e=>({...e,uploadedFiles:[...e.uploadedFiles,t],status:`Loading ${t.name}...`})),e.current&&e.current.loadFile(a)},onCancel:()=>{console.log("Back to main"),alert("Going back to main page")}}),(0,x.jsx)("div",{className:"mt-3",style:{height:"500px",position:"relative"},children:(0,x.jsx)(j,{ref:e,appState:n,onStateUpdate:e=>r(t=>({...t,...e}))})}),(0,x.jsx)("div",{className:"mt-2",children:(0,x.jsx)(T,{gridVisible:n.gridVisible,autoRotateEnabled:n.autoRotateEnabled,onToggleGrid:()=>r(e=>({...e,gridVisible:!e.gridVisible})),onAutoRotate:()=>r(e=>({...e,autoRotateEnabled:!e.autoRotateEnabled})),onResetView:()=>e.current?.resetCamera(),onUploadModel:()=>console.log("Trigger upload"),onScreenshot:()=>e.current?.takeScreenshot()})})]})},ne=()=>{const[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(""),[j,y]=(0,a.useState)(!0),{login:v,register:N}=te(),w=(0,r.Zp)(),S=e=>{let t="Authentication failed";e.response?.data?.detail?Array.isArray(e.response.data.detail)?t=e.response.data.detail.map(e=>e.msg).join(", "):"string"==typeof e.response.data.detail?t=e.response.data.detail:e.response.data.detail.msg&&(t=e.response.data.detail.msg):e.response?.data?.message?t=e.response.data.message:e.message?t=e.message:422===e.response?.status&&(t="Invalid request data. Please check your input."),f(t)},A=()=>{y(!j),t(""),n(""),l(""),c(""),m(""),h(""),f("")};return(0,x.jsx)(D.A,{fluid:!0,className:"bg-dark min-vh-100 d-flex align-items-center",children:(0,x.jsx)(M.A,{className:"w-100 justify-content-center",children:(0,x.jsx)(B.A,{md:6,lg:4,children:(0,x.jsx)(O.A,{className:"shadow",children:(0,x.jsxs)(O.A.Body,{className:"p-5",children:[(0,x.jsxs)("div",{className:"text-center mb-4",children:[(0,x.jsxs)("h2",{className:"text-primary",children:[(0,x.jsx)("i",{className:"fas fa-wind me-2"}),"CFD Analyzer"]}),(0,x.jsx)("p",{className:"text-muted",children:j?"Sign in to your account":"Create your account"})]}),b&&(0,x.jsx)(F.A,{variant:"danger",className:"mb-3",children:b}),j?(0,x.jsxs)(C.A,{onSubmit:async t=>{if(t.preventDefault(),p(!0),f(""),!e||!s)return f("Please fill in all fields"),void p(!1);try{await v(e,s),w("/")}catch(e){console.error("Login error:",e),S(e)}finally{p(!1)}},children:[(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Username"}),(0,x.jsx)(C.A.Control,{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,placeholder:"Enter your username",disabled:g})]}),(0,x.jsxs)(C.A.Group,{className:"mb-4",children:[(0,x.jsx)(C.A.Label,{children:"Password"}),(0,x.jsx)(C.A.Control,{type:"password",value:s,onChange:e=>n(e.target.value),required:!0,placeholder:"Enter your password",disabled:g})]}),(0,x.jsx)("div",{className:"d-grid mb-3",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:g,children:g?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),"Signing In..."]}):"Sign In"})}),(0,x.jsx)("div",{className:"text-center mb-3",children:(0,x.jsxs)("button",{type:"button",className:"btn btn-outline-danger w-100",onClick:()=>{window.location.href="http://localhost:8000/auth/google"},disabled:g,children:[(0,x.jsx)("i",{className:"fab fa-google me-2"}),"Continue with Google"]})}),(0,x.jsx)("div",{className:"text-center",children:(0,x.jsx)("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:A,disabled:g,children:"Don't have an account? Sign up"})})]}):(0,x.jsxs)(C.A,{onSubmit:async e=>{if(e.preventDefault(),p(!0),f(""),!(i&&o&&d&&u))return f("Please fill in all fields"),void p(!1);if(d.length<6)return f("Password must be at least 6 characters long"),void p(!1);try{await N(i,o,d,u),w("/")}catch(e){console.error("Register error:",e),S(e)}finally{p(!1)}},children:[(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Full Name"}),(0,x.jsx)(C.A.Control,{type:"text",value:u,onChange:e=>h(e.target.value),required:!0,placeholder:"Enter your full name",disabled:g})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Username"}),(0,x.jsx)(C.A.Control,{type:"text",value:i,onChange:e=>l(e.target.value),required:!0,placeholder:"Choose a username",disabled:g})]}),(0,x.jsxs)(C.A.Group,{className:"mb-3",children:[(0,x.jsx)(C.A.Label,{children:"Email"}),(0,x.jsx)(C.A.Control,{type:"email",value:o,onChange:e=>c(e.target.value),required:!0,placeholder:"Enter your email",disabled:g})]}),(0,x.jsxs)(C.A.Group,{className:"mb-4",children:[(0,x.jsx)(C.A.Label,{children:"Password"}),(0,x.jsx)(C.A.Control,{type:"password",value:d,onChange:e=>m(e.target.value),required:!0,placeholder:"Choose a password",minLength:6,disabled:g}),(0,x.jsx)(C.A.Text,{className:"text-muted",children:"Password must be at least 6 characters long"})]}),(0,x.jsx)("div",{className:"d-grid mb-3",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:g,children:g?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),"Creating Account..."]}):"Create Account"})}),(0,x.jsx)("div",{className:"text-center",children:(0,x.jsx)("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:A,disabled:g,children:"Already have an account? Sign in"})})]})]})})})})})};function re(){return(0,x.jsxs)("div",{children:[(0,x.jsxs)("nav",{children:[(0,x.jsx)(r.N_,{to:"/",children:"Home"})," | ",(0,x.jsx)(r.N_,{to:"/about",children:"About"})," | ",(0,x.jsx)(r.N_,{to:"/contact",children:"Contact"})]}),(0,x.jsx)(ee,{children:(0,x.jsxs)(r.BV,{children:[(0,x.jsx)(r.qh,{path:"/",element:(0,x.jsx)(I,{})}),(0,x.jsx)(r.qh,{path:"/feed",element:(0,x.jsx)(J,{onModelSelect:e=>console.log("Selected:",e),onBackToMain:()=>window.history.back()})}),(0,x.jsx)(r.qh,{path:"/upload",element:(0,x.jsx)(ae,{})}),(0,x.jsx)(r.qh,{path:"/login",element:(0,x.jsx)(ne,{})})]})})]})}const ie=document.createElement("div");document.body.appendChild(ie);n.createRoot(ie).render((0,x.jsx)(a.StrictMode,{children:(0,x.jsx)(r.I9,{children:(0,x.jsx)(re,{})})}))}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return a[e].call(s.exports,s,s.exports,r),s.exports}r.m=a,e=[],r.O=(t,s,a,n)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,a,n]=e[d],l=!0,o=0;o<s.length;o++)(!1&n||i>=n)&&Object.keys(r.O).every(e=>r.O[e](s[o]))?s.splice(o--,1):(l=!1,n<i&&(i=n));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);r.r(n);var i={};t=t||[null,s({}),s([]),s(s)];for(var l=2&a&&e;("object"==typeof l||"function"==typeof l)&&!~t.indexOf(l);l=s(l))Object.getOwnPropertyNames(l).forEach(t=>i[t]=()=>e[t]);return i.default=()=>e,r.d(n,i),n},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[i,l,o]=s,c=0;if(i.some(t=>0!==e[t])){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(o)var d=o(r)}for(t&&t(s);c<i.length;c++)n=i[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=globalThis.webpackChunk=globalThis.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=r.O(void 0,[856],()=>r(4644));i=r.O(i)})();